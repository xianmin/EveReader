{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/epubjs/mapping.js","webpack:///./src/components/EveViewer.vue?4e90","webpack:///./src/components/EveAnnotator.vue?d97d","webpack:///./src/components/EveAnnotatorPopover.vue?d2b3","webpack:///src/components/EveAnnotatorPopover.vue","webpack:///./src/components/EveAnnotatorPopover.vue?3eee","webpack:///./src/components/EveAnnotatorPopover.vue","webpack:///src/components/EveAnnotator.vue","webpack:///./src/components/EveAnnotator.vue?f723","webpack:///./src/components/EveAnnotator.vue","webpack:///./src/components/EveAnnotationList.vue?e5b8","webpack:///./src/components/EveAnnotationSvg.vue?6667","webpack:///src/components/EveAnnotationSvg.vue","webpack:///./src/components/EveAnnotationSvg.vue?a979","webpack:///./src/components/EveAnnotationSvg.vue","webpack:///src/components/EveAnnotationList.vue","webpack:///./src/components/EveAnnotationList.vue?517f","webpack:///./src/components/EveAnnotationList.vue","webpack:///./src/components/tool/LoadingRing.vue?27a7","webpack:///src/components/tool/LoadingRing.vue","webpack:///./src/components/tool/LoadingRing.vue?d096","webpack:///./src/components/tool/LoadingRing.vue","webpack:///src/components/EveViewer.vue","webpack:///./src/components/EveViewer.vue?0348","webpack:///./src/components/EveViewer.vue","webpack:///./src/App.vue?e27f","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?41d8","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?ae00","webpack:///./src/views/Home.vue","webpack:///./src/router/index.js","webpack:///./src/database.js","webpack:///./src/store/setting.js","webpack:///./src/store/annotation.js","webpack:///./src/store/index.js","webpack:///./src/api/http.js","webpack:///./src/api/index.js","webpack:///./src/event-bus.js","webpack:///./src/main.js","webpack:///./src/components/EveAnnotationSvg.vue?f352","webpack:///./src/epubjs/epubcfi.js","webpack:///./src/components/EveViewer.vue?1414","webpack:///./src/epubjs/utils/core.js","webpack:///./src/components/EveAnnotatorPopover.vue?1843","webpack:///./src/views/Home.vue?7b07"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","Mapping","layout","direction","axis","dev","this","horizontal","_dev","view","ranges","findRanges","map","rangeListToCfiList","section","cfiBase","contents","start","end","root","rangePairToCfiPair","findStart","findEnd","doc","startRange","EpubCFI","toRange","endRange","selection","defaultView","getSelection","createRange","removeAllRanges","setStart","startContainer","startOffset","setEnd","endContainer","endOffset","addRange","func","filter","acceptNode","node","trim","NodeFilter","FILTER_ACCEPT","FILTER_REJECT","safeFilter","treeWalker","createTreeWalker","SHOW_TEXT","nextNode","columns","scrollWidth","spreads","Math","ceil","spreadWidth","count","divisor","columnWidth","gap","pages","body","$el","found","stack","$prev","walk","left","right","top","bottom","elPos","nodeBounds","findTextStartRange","round","findTextEndRange","range","pos","splitTextNodeIntoRanges","getBoundingClientRect","prev","_splitter","textContent","text","ownerDocument","rangePair","collapse","startCfi","toString","endCfi","cifPair","render","_vm","_h","$createElement","_c","_self","style","backgroundColor","attrs","ref","fontSize","lineHeight","pageWidth","domProps","_s","sectionContent","_e","directives","rawName","loadingTimeOut","expression","staticClass","loadingTimer","staticRenderFns","showAnnotatorFromClick","annotator","position","on","doAnnotatorHighlight","doAnnotatorDelete","doAnnotatorCopy","doAnnotatorNote","annotatorPosition","_l","color","index","class","background","$event","$emit","_v","computed","props","mounted","methods","component","components","viewSectionElement","showAnnotator","cfiRange","selectRange","$parent","$refs","viewSection","addEventListener","$bus","onClickShowAnnotator","beforeDestroy","removeEventListener","off","_onMouseUp","evt","preventDefault","isCollapsed","getRangeAt","setAnnotatorPosition","rect","clientX","clientY","_onMouseDown","tempLeft","pointerX","innerWidth","pointHigherRect","topEnough","tempTop","pointerY","annotation","cfi","$store","state","ebookRootNode","hash","encodeURI","sectionIndex","date","Date","toISOString","dispatch","navigator","clipboard","writeText","staticStyle","clickAnnotation","item","height","width","rects","forEach","y","scrollY","x","emit","radius","strokeDashoffset","circumference","stroke","normalizedRadius","EveAnnotator","EveAnnotationList","LoadingRing","spineItems","scrollTimeOut","eventKeyDown","eventWheel","eventScroll","commit","watch","moveToTarget","scrollTo","targetPos","locationOf","epubcfi","isCfiString","el","currentLocation","location","storeLocation","kc","doPrev","innerHeight","clientHeight","doNext","wheelDelta","loadingStop","addLinkEvent","link","onclick","indexOf","log","findSpineHref","tempHref","id","bookList","prop","order","scopedSlots","_u","fn","scope","doRead","row","beforeCreate","created","init","open","route","Vue","use","VueRouter","eveReaderDB","eveAnnotationDB","routes","path","Home","beforeEnter","to","from","next","children","EveViewer","router","eveReaderDB_version","eveAnnotationDB_version","getEveReaderDB","openDB","upgrade","db","createObjectStore","keyPath","lastRead","createIndex","getFromDB","store","setToDB","newVal","put","getSettingFromDB","setting","updateSettingToDB","getLastReadFromDB","ebookID","updateLastReadToDB","getEveAnnotationDB","getAllAnnotation","getAll","addAnnotationToDB","deleteAnnotationFromDB","delete","namespaced","annotatorColorList","sidebarVisible","sidebarWidth","getters","mutations","SET_EBOOK_SETTING","actions","initSetting","database","setEbookSetting","annotationList","getBySectionIndex","rootState","currentSectionIndex","SET_ANNOTATION_LIST","ADD_ANNOTATION","DELETE_ANNOTATION","findIndex","initAnnotation","ebook","addAnnotation","deleteAnnotation","importAnnotation","json","JSON","parse","exportAnnotation","title","blob","Blob","stringify","uri","URL","createObjectURL","element","download","click","Vuex","Store","ebookViewReady","lastCfi","SET_EBOOK","SET_EBOOK_ROOT_NODE","SET_EBOOK_VIEW_READY","SET_LASTCFI","SET_CURRENT_SECTION_INDEX","setEbook","refreshEbookViewReady","getLastCFI","setLastRead","baseURL","process","instance","axios","interceptors","response","res","status","api","getBookList","EventBus","bus","defineProperties","$on","once","$once","$off","$api","config","productionTip","ElementUI","h","App","$mount","ELEMENT_NODE","TEXT_NODE","cfiFrom","base","ignoreClass","str","spinePos","parseComponent","steps","checkType","extend","fromRange","fromNode","TypeError","nodeType","cfiStr","baseComponent","pathComponent","getChapterComponent","getPathComponent","getRange","componentStr","terminal","offset","assertion","parts","split","parseTerminal","step","parseStep","stepStr","num","has_brackets","match","parseInt","isNaN","termialStr","characterOffset","textLocationAssertion","isNumber","indirection","splitStr","part","segment","join","segmentString","joinSteps","cfiString","cfiOne","cfiTwo","stepsA","stepsB","terminalA","terminalB","concat","tagName","filteredNode","filteredPosition","currentNode","filteredStep","unshift","stepA","stepB","needsIgnoring","querySelector","collapsed","patchOffset","pathTo","len","equalStep","anchor","sibling","parent","previousSibling","nextSibling","isText","classList","contains","curr","totalOffset","currNodeType","prevNodeType","output","prevIndex","findChildren","Array","textNodes","normalizedMap","childNodes","xpath","query","container","getElementById","_doc","evaluate","walkToNode","stepsToXpath","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","child","findNode","lastStepIndex","childIndex","startSteps","endSteps","missed","fixMiss","_spineNodeIndex","_pos","spineNodeIndex","toStart","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","_URL","webkitURL","mozURL","uuid","getTime","replace","random","floor","isElement","obj","parseFloat","isFinite","isFloat","f","prefixed","unprefixed","vendors","prefixes","lower","toLowerCase","defaults","arguments","source","sources","getOwnPropertyNames","propName","getOwnPropertyDescriptor","array","compareFunction","_start","_end","compared","pivot","a","b","indexOfSorted","bounds","getComputedStyle","widthProps","heightProps","borders","Node","elRange","selectNodeContents","windowBounds","indexOfNode","typeId","sib","indexOfElementNode","elementNode","isXml","ext","createBlob","content","mime","createBlobUrl","tempUrl","revokeBlobUrl","url","revokeObjectURL","createBase64Url","datauri","btoa","encodeURIComponent","markup","forceXMLDom","Parser","DOMParser","require","charCodeAt","parseFromString","qs","sel","elements","qsa","querySelectorAll","qsp","q","filtered","sprint","callback","firstChild","walked","blob2base64","reader","FileReader","readAsDataURL","onloadend","defer","freeze","querySelectorByType","html","getAttributeNS","filterChildren","nodeName","single","getParentByTagName","tagname"],"mappings":"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","file":"static/js/app.85c54e10.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"static/js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"6c569470\",\"chunk-cc5fc838\":\"c7dfbc6f\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-cc5fc838\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"static/css/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"31d6cfe0\",\"chunk-cc5fc838\":\"975647d3\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/EveReader/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import EpubCFI from \"./epubcfi\";\nimport { nodeBounds } from \"./utils/core\";\n\n/**\n * Map text locations to CFI ranges\n * @class\n * @param {Layout} layout Layout to apply\n * @param {string} [direction=\"ltr\"] Text direction\n * @param {string} [axis=\"horizontal\"] vertical or horizontal axis\n * @param {boolean} [dev] toggle developer highlighting\n */\nclass Mapping {\n  constructor(layout, direction, axis, dev) {\n    this.layout = layout;\n    this.horizontal = axis === \"horizontal\" ? true : false;\n    this.direction = direction || \"ltr\";\n    this._dev = dev;\n  }\n\n  /**\n   * Find CFI pairs for entire section at once\n   */\n  section(view) {\n    var ranges = this.findRanges(view);\n    var map = this.rangeListToCfiList(view.section.cfiBase, ranges);\n\n    return map;\n  }\n\n  /**\n   * Find CFI pairs for a page\n   * @param {Contents} contents Contents from view\n   * @param {string} cfiBase string of the base for a cfi\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   */\n  page(contents, cfiBase, start, end) {\n    var root = contents;\n    var result;\n\n    if (!root) {\n      return;\n    }\n\n    result = this.rangePairToCfiPair(cfiBase, {\n      start: this.findStart(root, start, end),\n      end: this.findEnd(root, start, end),\n    });\n\n    if (this._dev === true) {\n      let doc = contents.document;\n      let startRange = new EpubCFI(result.start).toRange(doc);\n      let endRange = new EpubCFI(result.end).toRange(doc);\n\n      let selection = doc.defaultView.getSelection();\n      let r = doc.createRange();\n      selection.removeAllRanges();\n      r.setStart(startRange.startContainer, startRange.startOffset);\n      r.setEnd(endRange.endContainer, endRange.endOffset);\n      selection.addRange(r);\n    }\n\n    return result;\n  }\n\n  /**\n   * Walk a node, preforming a function on each node it finds\n   * @private\n   * @param {Node} root Node to walkToNode\n   * @param {function} func walk function\n   * @return {*} returns the result of the walk function\n   */\n  walk(root, func) {\n    // IE11 has strange issue, if root is text node IE throws exception on\n    // calling treeWalker.nextNode(), saying\n    // Unexpected call to method or property access instead of returing null value\n    // if(root && root.nodeType === Node.TEXT_NODE) {\n    // \treturn;\n    // }\n    // safeFilter is required so that it can work in IE as filter is a function for IE\n    // and for other browser filter is an object.\n    var filter = {\n      acceptNode: function (node) {\n        if (node.data.trim().length > 0) {\n          return NodeFilter.FILTER_ACCEPT;\n        } else {\n          return NodeFilter.FILTER_REJECT;\n        }\n      },\n    };\n    var safeFilter = filter.acceptNode;\n    safeFilter.acceptNode = filter.acceptNode;\n\n    var treeWalker = document.createTreeWalker(\n      root,\n      NodeFilter.SHOW_TEXT,\n      safeFilter,\n      false\n    );\n    var node;\n    var result;\n    while ((node = treeWalker.nextNode())) {\n      result = func(node);\n      if (result) break;\n    }\n\n    return result;\n  }\n\n  findRanges(view) {\n    var columns = [];\n    var scrollWidth = view.contents.scrollWidth();\n    var spreads = Math.ceil(scrollWidth / this.layout.spreadWidth);\n    var count = spreads * this.layout.divisor;\n    var columnWidth = this.layout.columnWidth;\n    var gap = this.layout.gap;\n    var start, end;\n\n    for (var i = 0; i < count.pages; i++) {\n      start = (columnWidth + gap) * i;\n      end = columnWidth * (i + 1) + gap * i;\n      columns.push({\n        start: this.findStart(view.document.body, start, end),\n        end: this.findEnd(view.document.body, start, end),\n      });\n    }\n\n    return columns;\n  }\n\n  /**\n   * Find Start Range\n   * @private\n   * @param {Node} root root node\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   * @return {Range}\n   */\n  findStart(root, start, end) {\n    var stack = [root];\n    var $el;\n    var found;\n    var $prev = root;\n\n    while (stack.length) {\n      $el = stack.shift();\n\n      found = this.walk($el, (node) => {\n        var left, right, top, bottom;\n        var elPos;\n        var elRange;\n\n        elPos = nodeBounds(node);\n\n        if (this.horizontal && this.direction === \"ltr\") {\n          left = this.horizontal ? elPos.left : elPos.top;\n          right = this.horizontal ? elPos.right : elPos.bottom;\n\n          if (left >= start && left <= end) {\n            return node;\n          } else if (right > start) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        } else if (this.horizontal && this.direction === \"rtl\") {\n          left = elPos.left;\n          right = elPos.right;\n\n          if (right <= end && right >= start) {\n            return node;\n          } else if (left < end) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        } else {\n          top = elPos.top;\n          bottom = elPos.bottom;\n\n          if (top > start && top < end) {\n            return node;\n          } else if (bottom > start) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        }\n      });\n\n      if (found) {\n        return this.findTextStartRange(found, start, end);\n      }\n    }\n\n    // Return last element\n    return this.findTextStartRange($prev, start, end);\n  }\n\n  /**\n   * Find End Range\n   * @private\n   * @param {Node} root root node\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   * @return {Range}\n   */\n  findEnd(root, start, end) {\n    var stack = [root];\n    var $el;\n    var $prev = root;\n    var found;\n\n    while (stack.length) {\n      $el = stack.shift();\n\n      found = this.walk($el, (node) => {\n        var left, right, top, bottom;\n        var elPos;\n        var elRange;\n\n        elPos = nodeBounds(node);\n\n        if (this.horizontal && this.direction === \"ltr\") {\n          left = Math.round(elPos.left);\n          right = Math.round(elPos.right);\n\n          if (left > end && $prev) {\n            return $prev;\n          } else if (right > end) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        } else if (this.horizontal && this.direction === \"rtl\") {\n          left = Math.round(this.horizontal ? elPos.left : elPos.top);\n          right = Math.round(this.horizontal ? elPos.right : elPos.bottom);\n\n          if (right < start && $prev) {\n            return $prev;\n          } else if (left < start) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        } else {\n          top = Math.round(elPos.top);\n          bottom = Math.round(elPos.bottom);\n\n          if (top > end && $prev) {\n            return $prev;\n          } else if (bottom > end) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        }\n      });\n\n      if (found) {\n        return this.findTextEndRange(found, start, end);\n      }\n    }\n\n    // end of chapter\n    return this.findTextEndRange($prev, start, end);\n  }\n\n  /**\n   * Find Text Start Range\n   * @private\n   * @param {Node} root root node\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   * @return {Range}\n   */\n  findTextStartRange(node, start, end) {\n    var ranges = this.splitTextNodeIntoRanges(node);\n    var range;\n    var pos;\n    var left, top, right;\n\n    for (var i = 0; i < ranges.length; i++) {\n      range = ranges[i];\n\n      pos = range.getBoundingClientRect();\n\n      if (this.horizontal && this.direction === \"ltr\") {\n        left = pos.left;\n        if (left >= start) {\n          return range;\n        }\n      } else if (this.horizontal && this.direction === \"rtl\") {\n        right = pos.right;\n        if (right <= end) {\n          return range;\n        }\n      } else {\n        top = pos.top;\n        if (top > start) {\n          return range;\n        }\n      }\n\n      // prev = range;\n    }\n\n    return ranges[0];\n  }\n\n  /**\n   * Find Text End Range\n   * @private\n   * @param {Node} root root node\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   * @return {Range}\n   */\n  findTextEndRange(node, start, end) {\n    var ranges = this.splitTextNodeIntoRanges(node);\n    var prev;\n    var range;\n    var pos;\n    var left, right, top, bottom;\n\n    for (var i = 0; i < ranges.length; i++) {\n      range = ranges[i];\n\n      pos = range.getBoundingClientRect();\n\n      if (this.horizontal && this.direction === \"ltr\") {\n        left = pos.left;\n        right = pos.right;\n\n        if (left > end && prev) {\n          return prev;\n        } else if (right > end) {\n          return range;\n        }\n      } else if (this.horizontal && this.direction === \"rtl\") {\n        left = pos.left;\n        right = pos.right;\n\n        if (right < start && prev) {\n          return prev;\n        } else if (left < start) {\n          return range;\n        }\n      } else {\n        top = pos.top;\n        bottom = pos.bottom;\n\n        if (top > end && prev) {\n          return prev;\n        } else if (bottom > end) {\n          return range;\n        }\n      }\n\n      prev = range;\n    }\n\n    // Ends before limit\n    return ranges[ranges.length - 1];\n  }\n\n  /**\n   * Split up a text node into ranges for each word\n   * @private\n   * @param {Node} root root node\n   * @param {string} [_splitter] what to split on\n   * @return {Range[]}\n   */\n  splitTextNodeIntoRanges(node, _splitter) {\n    var ranges = [];\n    var textContent = node.textContent || \"\";\n    var text = textContent.trim();\n    var range;\n    var doc = node.ownerDocument;\n    // var splitter = _splitter || \" \";\n\n    // var pos = text.indexOf(splitter);\n\n    // if(pos === -1 || node.nodeType != Node.TEXT_NODE) {\n    // \trange = doc.createRange();\n    // \trange.selectNodeContents(node);\n    // \treturn [range];\n    // }\n\n    // TODO: this maybe need optimize\n    for (let i = 0; i < text.length; i++) {\n      range = doc.createRange();\n      range.setStart(node, i);\n      range.setEnd(node, i + 1);\n      ranges.push(range);\n      range = false;\n    }\n\n    // while ( pos != -1 ) {\n\n    // \tpos = text.indexOf(splitter, pos + 1);\n    // \tif(pos > 0) {\n\n    // \t\tif(range) {\n    // \t\t\trange.setEnd(node, pos);\n    // \t\t\tranges.push(range);\n    // \t\t}\n\n    // \t\trange = doc.createRange();\n    // \t\trange.setStart(node, pos+1);\n    // \t}\n    // }\n\n    // if(range) {\n    // \trange.setEnd(node, text.length);\n    // \tranges.push(range);\n    // }\n\n    return ranges;\n  }\n\n  /**\n   * Turn a pair of ranges into a pair of CFIs\n   * @private\n   * @param {string} cfiBase base string for an EpubCFI\n   * @param {object} rangePair { start: Range, end: Range }\n   * @return {object} { start: \"epubcfi(...)\", end: \"epubcfi(...)\" }\n   */\n  rangePairToCfiPair(cfiBase, rangePair) {\n    var startRange = rangePair.start;\n    var endRange = rangePair.end;\n\n    startRange.collapse(true);\n    endRange.collapse(false);\n\n    let startCfi = new EpubCFI(startRange, cfiBase).toString();\n    let endCfi = new EpubCFI(endRange, cfiBase).toString();\n\n    return {\n      start: startCfi,\n      end: endCfi,\n    };\n  }\n\n  rangeListToCfiList(cfiBase, columns) {\n    var map = [];\n    var cifPair;\n\n    for (var i = 0; i < columns.length; i++) {\n      cifPair = this.rangePairToCfiPair(cfiBase, columns[i]);\n\n      map.push(cifPair);\n    }\n\n    return map;\n  }\n\n  /**\n   * Set the axis for mapping\n   * @param {string} axis horizontal | vertical\n   * @return {boolean} is it horizontal?\n   */\n  axis(axis) {\n    if (axis) {\n      this.horizontal = axis === \"horizontal\" ? true : false;\n    }\n    return this.horizontal;\n  }\n}\n\nexport default Mapping;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({ 'background-color': this.backgroundColor }),attrs:{\"id\":\"eve-reader-view\"}},[_c('div',{ref:\"viewSection\",style:({\n      fontSize: this.fontSize + 'px',\n      'line-height': this.lineHeight,\n      'max-width': this.pageWidth + 'px',\n    }),attrs:{\"id\":\"viewSection\"},domProps:{\"innerHTML\":_vm._s(_vm.sectionContent)}}),(_vm.ebookViewReady)?_c('eve-annotator'):_vm._e(),(_vm.ebookViewReady)?_c('eve-annotation-list'):_vm._e(),_c('loading-ring',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loadingTimeOut !== null),expression:\"loadingTimeOut !== null\"}],staticClass:\"loading-ring\",attrs:{\"radius\":\"30\",\"progress\":_vm.loadingTimer,\"stroke\":\"5\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('eve-annotator-popover',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAnnotator),expression:\"showAnnotator\"}],attrs:{\"showAnnotatorFromClick\":_vm.showAnnotatorFromClick,\"annotatorPosition\":_vm.annotator.position},on:{\"do-annotator-highlight\":_vm.doAnnotatorHighlight,\"do-annotator-delete\":_vm.doAnnotatorDelete,\"do-annotator-copy\":_vm.doAnnotatorCopy,\"do-annotator-note\":_vm.doAnnotatorNote}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({\n    position: 'fixed',\n    top: +_vm.annotatorPosition.top + 'px',\n    left: +_vm.annotatorPosition.left + 'px',\n  }),attrs:{\"id\":\"eve-popover-wrapper\"}},[_c('div',{staticClass:\"eve-popover-circle-list\"},_vm._l((_vm.annotatorColorList),function(color,index){return _c('div',{key:color,staticClass:\"eve-popover-circle\",class:'eve-hl-' + index,style:({ background: color }),on:{\"click\":function($event){return _vm.$emit('do-annotator-highlight', color)}}})}),0),_c('div',{staticClass:\"eve-popover-tool-list\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAnnotatorFromClick),expression:\"showAnnotatorFromClick\"}],staticClass:\"eve-popover-tool tool-delete\",on:{\"click\":function($event){return _vm.$emit('do-annotator-delete')}}},[_c('i',{staticClass:\"el-icon-delete\"})]),_c('div',{staticClass:\"eve-popover-tool tool-note\",on:{\"click\":function($event){return _vm.$emit('do-annotator-note')}}},[_vm._v(\" Note \")]),_c('div',{staticClass:\"eve-popover-tool tool-copy\",on:{\"click\":function($event){return _vm.$emit('do-annotator-copy')}}},[_vm._v(\" Copy \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    id=\"eve-popover-wrapper\"\n    :style=\"{\n      position: 'fixed',\n      top: +annotatorPosition.top + 'px',\n      left: +annotatorPosition.left + 'px',\n    }\"\n  >\n    <div class=\"eve-popover-circle-list\">\n      <div\n        class=\"eve-popover-circle\"\n        v-for=\"(color, index) in annotatorColorList\"\n        :key=\"color\"\n        :class=\"'eve-hl-' + index\"\n        :style=\"{ background: color }\"\n        @click=\"$emit('do-annotator-highlight', color)\"\n      ></div>\n    </div>\n\n    <div class=\"eve-popover-tool-list\">\n      <div\n        class=\"eve-popover-tool tool-delete\"\n        @click=\"$emit('do-annotator-delete')\"\n        v-show=\"showAnnotatorFromClick\"\n      >\n        <i class=\"el-icon-delete\"></i>\n      </div>\n\n      <div\n        class=\"eve-popover-tool tool-note\"\n        @click=\"$emit('do-annotator-note')\"\n      >\n        Note\n      </div>\n\n      <div\n        class=\"eve-popover-tool tool-copy\"\n        @click=\"$emit('do-annotator-copy')\"\n      >\n        Copy\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  computed: {\n    ...mapGetters(\"setting\", [\"annotatorColorList\"]),\n  },\n\n  props: [\"showAnnotatorFromClick\", \"annotatorPosition\"],\n\n  mounted() {},\n\n  methods: {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#eve-popover-wrapper {\n  z-index: 99;\n  position: absolute;\n  width: 124px;\n  padding: 2px;\n  background: white;\n  border: 1px solid #c5c5c5;\n  box-shadow: rgba(0, 0, 0, 0.3) 0 2px 12px 1px;\n  border-radius: 5px;\n\n  .eve-popover-circle-list {\n    display: flex;\n    margin: 2px;\n\n    .eve-popover-circle {\n      cursor: pointer;\n      border-radius: 50%;\n      border: 1px solid;\n      width: 20px;\n      height: 20px;\n      box-sizing: border-box;\n      margin: 2px;\n      opacity: 0.7;\n    }\n  }\n\n  .eve-popover-tool-list {\n    display: flex;\n    padding: 2px;\n    justify-content: space-around;\n    border-top: 1px solid #c5c5c5;\n\n    .eve-popover-tool {\n      cursor: pointer;\n      font-size: 16px;\n      flex: 2;\n      text-align: center;\n    }\n\n    .tool-note {\n      border-right: 1px solid #c5c5c5;\n    }\n\n    .tool-delete {\n      flex: 1;\n      color: red;\n      font-weight: bold;\n      border-right: 1px solid #c5c5c5;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotatorPopover.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotatorPopover.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EveAnnotatorPopover.vue?vue&type=template&id=22fc5670&scoped=true&\"\nimport script from \"./EveAnnotatorPopover.vue?vue&type=script&lang=js&\"\nexport * from \"./EveAnnotatorPopover.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EveAnnotatorPopover.vue?vue&type=style&index=0&id=22fc5670&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22fc5670\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <eve-annotator-popover\n    v-show=\"showAnnotator\"\n    :showAnnotatorFromClick=\"showAnnotatorFromClick\"\n    :annotatorPosition=\"annotator.position\"\n    @do-annotator-highlight=\"doAnnotatorHighlight\"\n    @do-annotator-delete=\"doAnnotatorDelete\"\n    @do-annotator-copy=\"doAnnotatorCopy\"\n    @do-annotator-note=\"doAnnotatorNote\"\n  />\n</template>\n\n<script>\nimport EveAnnotatorPopover from \"./EveAnnotatorPopover.vue\";\nimport epubCfi from \"../epubjs/epubcfi\";\n\nexport default {\n  components: { EveAnnotatorPopover },\n\n  data() {\n    return {\n      viewSectionElement: null,\n      showAnnotator: false,\n      showAnnotatorFromClick: false,\n      annotator: {\n        position: {\n          top: 0,\n          left: 0,\n        },\n        cfiRange: \"\",\n        text: \"\",\n      },\n      selectRange: null,\n    };\n  },\n\n  mounted() {\n    this.viewSectionElement = this.$parent.$refs.viewSection;\n    this.viewSectionElement.addEventListener(\n      \"mouseup\",\n      this._onMouseUp.bind(this)\n    );\n    this.viewSectionElement.addEventListener(\n      \"mousedown\",\n      this._onMouseDown.bind(this)\n    );\n\n    this.$bus.on(\"click-show-annotator\", this.onClickShowAnnotator);\n  },\n\n  beforeDestroy() {\n    this.viewSectionElement.removeEventListener(\n      \"mouseup\",\n      this._onMouseUp.bind(this)\n    );\n    this.viewSectionElement.removeEventListener(\n      \"mousedown\",\n      this._onMouseDown.bind(this)\n    );\n    this.$bus.off(\"click-show-annotator\");\n  },\n\n  methods: {\n    _onMouseUp(evt) {\n      evt.preventDefault();\n      const selection = window.getSelection();\n      if (!selection.isCollapsed) {\n        this.selectRange = selection.getRangeAt(0);\n        const rect = this.selectRange.getBoundingClientRect();\n        this.setAnnotatorPosition(rect, evt.clientX, evt.clientY);\n\n        this.annotator.cfiRange = new epubCfi(\n          this.selectRange,\n          this.$parent.section.cfiBase\n        ).toString();\n\n        // if select, show EveAnnotatorPopover.vue\n        this.showAnnotator = true;\n        this.showAnnotatorFromClick = false;\n\n        // temporary store text to annotator\n        this.annotator.text = selection.toString();\n      }\n    },\n\n    _onMouseDown() {\n      this.showAnnotator = false;\n      window.getSelection().removeAllRanges();\n    },\n\n    // rect is getBoundingClientRect()\n    // annotator width = 130, height =65\n    // annotator position is fixed\n    setAnnotatorPosition(rect, pointerX, pointerY) {\n      let tempTop = rect.bottom + 5;\n      let tempLeft = pointerX - 65; // 65 is half width of annotator\n\n      // fix annotator left position\n      if (tempLeft < 0) {\n        tempLeft = pointerX;\n      }\n\n      // fix annotator right position\n      if (tempLeft + 130 > window.innerWidth) {\n        tempLeft = window.innerWidth - 140;\n      }\n\n      // fix annotator top position, there is multiple switch\n      const pointHigherRect = () =>\n        rect.bottom - pointerY > pointerY - rect.top + 20;\n      const topEnough = () => rect.top > 65;\n      const bottomEnough = () => window.innerHeight - rect.bottom > 65;\n      if (pointHigherRect()) {\n        if (topEnough()) {\n          tempTop = rect.top - 65;\n        } else if (!bottomEnough()) {\n          tempTop = pointerY + 5;\n        }\n      } else if (!bottomEnough()) {\n        if (topEnough()) {\n          tempTop = rect.top - 65;\n        } else {\n          tempTop = pointerY - 65;\n        }\n      }\n\n      this.annotator.position.top = tempTop;\n      this.annotator.position.left = tempLeft;\n    },\n\n    onClickShowAnnotator(evt, annotation) {\n      this.showAnnotatorFromClick = true;\n\n      this.annotator.cfiRange = annotation.cfiRange;\n      this.annotator.type = annotation.type;\n      this.annotator.text = annotation.text;\n\n      let cfi = new epubCfi(this.annotator.cfiRange);\n      this.selectRange = cfi.toRange(this.$store.state.ebookRootNode);\n      let rect = this.selectRange.getBoundingClientRect();\n      this.setAnnotatorPosition(rect, evt.clientX, evt.clientY);\n\n      this.showAnnotator = true;\n    },\n\n    doAnnotatorHighlight(color) {\n      if (this.showAnnotatorFromClick) {\n        this.doAnnotatorDelete(); // delete first, than change color;\n      }\n\n      let annotation = {};\n      annotation.type = \"highlight\";\n      annotation.cfiRange = this.annotator.cfiRange;\n      annotation.color = color;\n      annotation.hash = encodeURI(\"highlight-\" + annotation.cfiRange);\n      annotation.text = this.annotator.text;\n      annotation.sectionIndex = this.$parent.section.index;\n      annotation.date = new Date().toISOString();\n\n      this.showAnnotator = false;\n      this.$store.dispatch(\"annotation/addAnnotation\", annotation);\n    },\n\n    doAnnotatorDelete() {\n      this.showAnnotator = false;\n      this.showAnnotatorFromClick = false;\n      let cfiRange = this.annotator.cfiRange;\n      let type = this.annotator.type;\n      let hash = encodeURI(type + \"-\" + cfiRange);\n\n      this.$store.dispatch(\"annotation/deleteAnnotation\", hash);\n    },\n\n    doAnnotatorCopy() {\n      navigator.clipboard.writeText(this.annotator.text);\n      this.showAnnotator = false;\n    },\n\n    // TODO\n    doAnnotatorNote() {\n      this.showAnnotator = false;\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotator.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotator.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EveAnnotator.vue?vue&type=template&id=321556bb&\"\nimport script from \"./EveAnnotator.vue?vue&type=script&lang=js&\"\nexport * from \"./EveAnnotator.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"eve-annotation-list\"}},_vm._l((_vm.getBySectionIndex),function(annotation){return _c('eve-annotation-svg',{key:annotation.hash,attrs:{\"annotation\":annotation}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"pointer-events\":\"none\"}},[_c('g',{ref:\"annotation\",attrs:{\"fill\":this.annotation.color,\"fill-opacity\":\"0.3\",\"pointer-events\":\"visiblePainted\"},on:{\"click\":_vm.clickAnnotation}},_vm._l((_vm.rects),function(item,index){return _c('rect',{key:index,attrs:{\"x\":item.left,\"y\":item.top,\"height\":item.height,\"width\":item.width}})}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <svg\n    style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%\"\n    pointer-events=\"none\"\n  >\n    <g\n      :fill=\"this.annotation.color\"\n      fill-opacity=\"0.3\"\n      pointer-events=\"visiblePainted\"\n      @click=\"clickAnnotation\"\n      ref=\"annotation\"\n    >\n      <rect\n        v-for=\"(item, index) in rects\"\n        :key=\"index\"\n        :x=\"item.left\"\n        :y=\"item.top\"\n        :height=\"item.height\"\n        :width=\"item.width\"\n      ></rect>\n    </g>\n  </svg>\n</template>\n\n<script>\nimport epubCfi from \"../epubjs/epubcfi\";\n\nexport default {\n  props: [\"annotation\"],\n\n  data() {\n    return {\n      rects: [],\n    };\n  },\n\n  mounted() {\n    let cfi = new epubCfi(this.annotation.cfiRange);\n    let range = cfi.toRange(this.$store.state.ebookRootNode);\n    let rects = Array.from(range.getClientRects());\n    rects.forEach((i) => {\n      i.y += window.scrollY;\n      i.x -= this.$parent.$el.getBoundingClientRect().left;\n    });\n    this.rects = rects;\n  },\n\n  methods: {\n    clickAnnotation(evt) {\n      this.$bus.emit(\"click-show-annotator\", evt, this.annotation);\n    },\n  },\n};\n</script>\n\n<style>\ng {\n  cursor: pointer;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotationSvg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotationSvg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EveAnnotationSvg.vue?vue&type=template&id=9c6a3fc2&\"\nimport script from \"./EveAnnotationSvg.vue?vue&type=script&lang=js&\"\nexport * from \"./EveAnnotationSvg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EveAnnotationSvg.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"eve-annotation-list\">\n    <eve-annotation-svg\n      v-for=\"annotation in getBySectionIndex\"\n      :key=\"annotation.hash\"\n      :annotation=\"annotation\"\n    />\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport EveAnnotationSvg from \"./EveAnnotationSvg\";\n\nexport default {\n  components: { EveAnnotationSvg },\n  computed: {\n    ...mapGetters(\"annotation\", [\"getBySectionIndex\"]),\n  },\n\n  mounted() {},\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotationList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotationList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EveAnnotationList.vue?vue&type=template&id=346e3841&\"\nimport script from \"./EveAnnotationList.vue?vue&type=script&lang=js&\"\nexport * from \"./EveAnnotationList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"height\":_vm.radius * 2,\"width\":_vm.radius * 2}},[_c('circle',{style:({ strokeDashoffset: _vm.strokeDashoffset }),attrs:{\"stroke\":\"#409eff\",\"fill\":\"transparent\",\"stroke-dasharray\":_vm.circumference + ' ' + _vm.circumference,\"stroke-width\":_vm.stroke,\"r\":_vm.normalizedRadius,\"cx\":_vm.radius,\"cy\":_vm.radius}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <svg :height=\"radius * 2\" :width=\"radius * 2\">\n    <circle\n      stroke=\"#409eff\"\n      fill=\"transparent\"\n      :stroke-dasharray=\"circumference + ' ' + circumference\"\n      :style=\"{ strokeDashoffset }\"\n      :stroke-width=\"stroke\"\n      :r=\"normalizedRadius\"\n      :cx=\"radius\"\n      :cy=\"radius\"\n    />\n  </svg>\n</template>\n\n<script>\nexport default {\n  props: [\"radius\", \"progress\", \"stroke\"],\n\n  data() {\n    const normalizedRadius = this.radius - this.stroke * 2;\n    const circumference = normalizedRadius * 2 * Math.PI;\n\n    return {\n      normalizedRadius,\n      circumference,\n    };\n  },\n  computed: {\n    strokeDashoffset() {\n      return this.circumference - (this.progress / 100) * this.circumference;\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./LoadingRing.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./LoadingRing.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoadingRing.vue?vue&type=template&id=5850e585&\"\nimport script from \"./LoadingRing.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadingRing.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    id=\"eve-reader-view\"\n    :style=\"{ 'background-color': this.backgroundColor }\"\n  >\n    <div\n      id=\"viewSection\"\n      v-html=\"sectionContent\"\n      ref=\"viewSection\"\n      v-bind:style=\"{\n        fontSize: this.fontSize + 'px',\n        'line-height': this.lineHeight,\n        'max-width': this.pageWidth + 'px',\n      }\"\n    />\n\n    <eve-annotator v-if=\"ebookViewReady\" />\n    <eve-annotation-list v-if=\"ebookViewReady\" />\n    <loading-ring\n      class=\"loading-ring\"\n      v-show=\"loadingTimeOut !== null\"\n      radius=\"30\"\n      :progress=\"loadingTimer\"\n      stroke=\"5\"\n    />\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport EveAnnotator from \"./EveAnnotator.vue\";\nimport EveAnnotationList from \"./EveAnnotationList.vue\";\nimport epubMapping from \"../epubjs/mapping\";\nimport epubCfi from \"../epubjs/epubcfi\";\nimport { isNumber } from \"../epubjs/utils/core\";\nimport LoadingRing from \"./tool/LoadingRing.vue\";\n// import Theme from '../theme.js';\n\nexport default {\n  computed: {\n    ...mapGetters([\"ebook\", \"ebookViewReady\"]),\n    ...mapGetters(\"setting\", [\n      \"fontSize\",\n      \"lineHeight\",\n      \"pageWidth\",\n      \"backgroundColor\",\n    ]),\n  },\n\n  components: {\n    EveAnnotator,\n    EveAnnotationList,\n    LoadingRing,\n  },\n\n  data() {\n    return {\n      spineItems: null,\n      section: null,\n      sectionContent: null,\n      scrollTimeOut: null,\n      loadingTimer: 0,\n      loadingTimeOut: null,\n    };\n  },\n\n  async mounted() {\n    await this.ebook.loaded();\n    await this.$store.dispatch(\"annotation/initAnnotation\");\n    let lastCfi = await this.$store.dispatch(\"getLastCFI\");\n    this.spineItems = this.ebook.epub.spine.spineItems;\n    this.display(lastCfi || 0);\n\n    this.$bus.on(\"event-view-display\", this.display);\n\n    window.addEventListener(\"keydown\", this.eventKeyDown);\n    window.addEventListener(\"wheel\", this.eventWheel);\n    // when scroll finish, store cfi\n    window.addEventListener(\"scroll\", this.eventScroll);\n  },\n\n  beforeDestroy() {\n    this.$bus.off(\"event-view-display\");\n    window.removeEventListener(\"keydown\", this.eventKeyDown);\n    window.removeEventListener(\"wheel\", this.eventWheel);\n    window.removeEventListener(\"scroll\", this.eventScroll);\n    this.$store.commit(\"SET_EBOOK_VIEW_READY\", false);\n  },\n\n  watch: {},\n\n  methods: {\n    async display(target) {\n      this.$store.commit(\"SET_EBOOK_VIEW_READY\", false);\n      let sec = this.ebook.epub.spine.get(target);\n\n      if (sec.index === this.$store.state.currentSectionIndex) {\n        await this.moveToTarget(target);\n        return;\n      }\n\n      this.$store.commit(\"SET_CURRENT_SECTION_INDEX\", sec.index);\n\n      this.section = sec;\n      let request = this.ebook.epub.load.bind(this.ebook.epub);\n      let result = await this.section.render(request);\n      this.sectionContent = result\n        .replace(/(<\\s*\\/?\\s*)html(\\s*([^>]*)?\\s*>)/gi, \"$1eve-view-html$2\")\n        .replace(/(<\\s*\\/?\\s*)head(\\s*([^>]*)?\\s*>)/gi, \"$1eve-view-head$2\")\n        .replace(/(<\\s*\\/?\\s*)body(\\s*([^>]*)?\\s*>)/gi, \"$1eve-view-body$2\");\n\n      this.$nextTick(() => {\n        this.$store.commit(\n          \"SET_EBOOK_ROOT_NODE\",\n          this.$refs.viewSection.childNodes[0]\n        );\n        this.addLinkEvent();\n\n        // waiting viewer finish render, include image\n        setTimeout(() => {\n          this.$store.commit(\"SET_EBOOK_VIEW_READY\", true);\n\n          // if target is epubCfi, moving to\n          if (target === this.section.href) {\n            window.scroll(0, 0);\n          } else if (isNumber(target)) {\n            // return;\n          } else {\n            this.moveToTarget(target);\n          }\n        }, 30);\n      });\n    },\n\n    moveToTarget(target) {\n      let targetPos = this.locationOf(target);\n\n      if (window.scrollY > 0) {\n        window.scrollTo(0, targetPos.top + window.scrollY);\n      } else {\n        window.scrollTo(0, targetPos.top);\n      }\n      // at same section, reset ebook view ready\n      this.$store.commit(\"SET_EBOOK_VIEW_READY\", true);\n    },\n\n    // Reference: epubjs contents.js,\n    // Get the location offset of a EpubCFI or an #id\n    locationOf(target) {\n      let position;\n      let targetPos = { left: 0, top: 0 };\n      let epubcfi = new epubCfi();\n\n      if (epubcfi.isCfiString(target)) {\n        let range = new epubCfi(target).toRange(\n          this.$store.state.ebookRootNode\n        );\n        if (range) {\n          position = range.getBoundingClientRect();\n        }\n      } else if (typeof target === \"string\" && target.indexOf(\"#\") > -1) {\n        let id = target.substring(target.indexOf(\"#\") + 1);\n        let el = document.getElementById(id);\n        if (el) {\n          position = el.getBoundingClientRect();\n        }\n      }\n\n      if (position) {\n        targetPos.left = position.left;\n        targetPos.top = position.top;\n      }\n\n      return targetPos;\n    },\n\n    currentLocation() {\n      // let startPos = window.scrollY;\n      // let endPos = startPos + window.innerHeight;\n      let mapping = new epubMapping();\n      let location = mapping.page(\n        this.$refs.viewSection,\n        this.section.cfiBase,\n        0,\n        window.innerHeight\n      );\n      // console.log(location);\n      return location;\n    },\n\n    async doPrev() {\n      if (this.section.index > 0) {\n        await this.display(this.section.index - 1);\n        window.scroll(0, document.body.clientHeight);\n        this.storeLocation();\n      }\n    },\n\n    async doNext() {\n      if (this.section.index < this.spineItems.length - 1) {\n        await this.display(this.section.index + 1);\n        window.scroll(0, 0);\n        this.storeLocation();\n      }\n    },\n\n    storeLocation() {\n      let location = this.currentLocation();\n      this.$store.dispatch(\"setLastRead\", location.start);\n    },\n\n    eventScroll() {\n      if (this.scrollTimeOut !== null) {\n        clearTimeout(this.scrollTimeOut);\n      }\n      this.scrollTimeOut = setTimeout(() => {\n        this.storeLocation();\n      }, 200);\n    },\n\n    eventKeyDown(e) {\n      const kc = e.keyCode || e.which;\n      if (window.scrollY === 0) {\n        // UP, PageUP, display prev section; here is a bug.\n        if (kc === 33 || kc === 38) {\n          this.doPrev();\n          e.preventDefault();\n        }\n      }\n\n      if (window.scrollY + window.innerHeight >= document.body.clientHeight) {\n        // DOWN, PageDOWN, display next section;\n        if (kc === 34 || kc === 40) {\n          this.doNext();\n          e.preventDefault();\n        }\n      }\n    },\n\n    eventWheel(e) {\n      // at the top of page, do prev\n      if (window.scrollY === 0 && e.wheelDelta > 0) {\n        this.loadingTimer += 5;\n        if (this.loadingTimer >= 100) {\n          this.doPrev();\n        }\n        this.loadingStop();\n      }\n\n      // at the bottom of page, do next\n      if (\n        window.scrollY + window.innerHeight >= document.body.clientHeight &&\n        e.wheelDelta < 0\n      ) {\n        this.loadingTimer += 5;\n        if (this.loadingTimer >= 100) {\n          this.doNext();\n        }\n        this.loadingStop();\n      }\n    },\n\n    loadingStop() {\n      if (this.loadingTimeOut !== null) {\n        clearTimeout(this.loadingTimeOut);\n      }\n      this.loadingTimeOut = setTimeout(() => {\n        this.loadingTimer = 0;\n      }, 100);\n    },\n\n    // fix viewSection link\n    addLinkEvent() {\n      let links = this.$store.state.ebookRootNode.querySelectorAll(\"a[href]\");\n\n      for (let i = 0; i < links.length; i++) {\n        let link = links[i];\n\n        link.onclick = (evt) => {\n          evt.preventDefault();\n          let target;\n          let href = link.getAttribute(\"href\");\n\n          // TODO: use default application to open\n          if (href.indexOf(\"mailto:\") === 0) return;\n\n          if (href.indexOf(\"://\") > -1) {\n            console.log(href);\n            return;\n          }\n\n          const findSpineHref = (href) => {\n            for (let i in this.ebook.epub.spine.spineByHref) {\n              if (i.indexOf(href) > -1) {\n                return i;\n              }\n            }\n          };\n\n          // find correct href, and than display\n          if (href.indexOf(\"#\") > -1) {\n            let id = href.substring(href.indexOf(\"#\"));\n            let tempHref = href.substring(0, href.indexOf(\"#\"));\n            target = findSpineHref(tempHref) + id;\n          } else {\n            target = findSpineHref(href);\n          }\n\n          if (target) this.display(target);\n        };\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n#eve-reader-view {\n  position: relative;\n  width: 100%;\n\n  #viewSection {\n    margin: 0 auto;\n  }\n}\n\nimg {\n  max-width: 600px;\n}\n\n.loading-ring {\n  position: fixed;\n  right: 20px;\n  bottom: 20px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EveViewer.vue?vue&type=template&id=7417bd2c&\"\nimport script from \"./EveViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./EveViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EveViewer.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=03b46458&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"eve-calibre-home\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.bookList,\"stripe\":\"\",\"border\":\"\",\"fit\":\"\",\"default-sort\":{ prop: 'last_modified', order: 'descending' }}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"Title\"}}),_c('el-table-column',{attrs:{\"prop\":\"last_modified\",\"label\":\"Last modified\",\"sortable\":\"\",\"align\":\"center\",\"width\":\"150%\"}}),_c('el-table-column',{attrs:{\"label\":\"Read\",\"align\":\"center\",\"width\":\"120%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"normal\"},on:{\"click\":function($event){return _vm.doRead(scope.row)}}},[_vm._v(\"READ\")])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"eve-calibre-home\">\n    <el-table\n      :data=\"bookList\"\n      stripe\n      border\n      fit\n      :default-sort=\"{ prop: 'last_modified', order: 'descending' }\"\n      style=\"width: 100%\"\n    >\n      <el-table-column type=\"index\" align=\"center\"> </el-table-column>\n      <el-table-column prop=\"title\" label=\"Title\"> </el-table-column>\n      <el-table-column\n        prop=\"last_modified\"\n        label=\"Last modified\"\n        sortable\n        align=\"center\"\n        width=\"150%\"\n      >\n      </el-table-column>\n      <el-table-column label=\"Read\" align=\"center\" width=\"120%\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"normal\" @click=\"doRead(scope.row)\">READ</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"home\",\n\n  components: {},\n\n  data() {\n    return {\n      bookList: [],\n    };\n  },\n\n  beforeCreate() {},\n\n  created() {\n    this.init();\n  },\n\n  methods: {\n    async init() {\n      this.bookList = await this.$api.getBookList();\n    },\n\n    doRead(row) {\n      let path = `/reader/view/${row.book_id}`;\n      let route = this.$router.resolve(path);\n      // open ebook in the new window\n      window.open(route.href, \"_blank\");\n    },\n  },\n\n  mounted() {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.eve-calibre-home {\n  width: 900px;\n  margin: 0 auto;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=33907d84&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=33907d84&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"33907d84\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport Home from \"../views/Home.vue\";\nimport EveViewer from \"../components/EveViewer.vue\";\n\nVue.use(VueRouter);\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Home\",\n    component: Home,\n    beforeEnter: (to, from, next) => {\n      // if (!process.env.IS_ELECTRON) next('/reader/');\n      next(\"/reader/\");\n    },\n  },\n  {\n    path: \"/reader/\",\n    name: \"Reader\",\n    component: () => import(\"../views/Reader.vue\"),\n    children: [\n      {\n        path: \"/reader/open/:fileName\",\n        name: \"open\",\n        component: EveViewer,\n      },\n      {\n        path: \"/reader/view/:book_id\",\n        name: \"view\",\n        component: EveViewer,\n      },\n    ],\n  },\n  {\n    path: \"/about\",\n    name: \"About\",\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () =>\n      import(/* webpackChunkName: \"about\" */ \"../views/About.vue\"),\n  },\n];\n\nconst router = new VueRouter({\n  routes,\n});\n\nexport default router;\n","import { openDB } from \"idb\";\n\nlet eveReaderDB;\nconst eveReaderDB_version = 1;\nlet eveAnnotationDB;\nconst eveAnnotationDB_version = 1;\n\nexport default {\n  async getEveReaderDB() {\n    if (!eveReaderDB) {\n      eveReaderDB = await openDB(\"EveReader\", eveReaderDB_version, {\n        upgrade(db) {\n          db.createObjectStore(\"setting\", {\n            keyPath: \"name\",\n          });\n\n          const lastRead = db.createObjectStore(\"lastRead\", {\n            keyPath: \"ebookID\",\n          });\n\n          lastRead.createIndex(\"date\", \"date\");\n        },\n      });\n    }\n    return eveReaderDB;\n  },\n\n  async getFromDB(store, key) {\n    await this.getEveReaderDB();\n    try {\n      return await eveReaderDB.get(store, key);\n    } catch {\n      return;\n    }\n  },\n\n  async setToDB(store, newVal) {\n    await this.getEveReaderDB();\n    await eveReaderDB.put(store, newVal);\n  },\n\n  async getSettingFromDB() {\n    let setting = await this.getFromDB(\"setting\", \"user-setting\");\n    return setting ? setting.value : undefined;\n  },\n\n  async updateSettingToDB(newVal) {\n    await this.getEveReaderDB();\n    await eveReaderDB.put(\"setting\", {\n      name: \"user-setting\",\n      value: newVal,\n    });\n  },\n\n  getLastReadFromDB(ebookID) {\n    return this.getFromDB(\"lastRead\", ebookID);\n  },\n\n  updateLastReadToDB(newVal) {\n    this.setToDB(\"lastRead\", newVal);\n  },\n\n  async getEveAnnotationDB(ebookID) {\n    eveAnnotationDB = await openDB(ebookID, eveAnnotationDB_version, {\n      upgrade(db) {\n        const store = db.createObjectStore(\"annotation\", {\n          keyPath: \"hash\",\n        });\n        store.createIndex(\"date\", \"date\");\n      },\n    });\n\n    return eveAnnotationDB;\n  },\n\n  async getAllAnnotation(ebookID) {\n    if (!eveAnnotationDB) await this.getEveAnnotationDB(ebookID);\n    try {\n      return await eveAnnotationDB.getAll(\"annotation\");\n    } catch {\n      return;\n    }\n  },\n\n  async addAnnotationToDB(ebookID, annotation) {\n    if (!eveAnnotationDB) await this.getEveAnnotationDB(ebookID);\n    await eveAnnotationDB.put(\"annotation\", annotation);\n  },\n\n  async deleteAnnotationFromDB(ebookID, hash) {\n    if (!eveAnnotationDB) await this.getEveAnnotationDB(ebookID);\n    await eveAnnotationDB.delete(\"annotation\", hash);\n  },\n};\n","import database from \"../database\";\n\nexport default {\n  namespaced: true,\n\n  state: {\n    fontSize: 18,\n    lineHeight: 1.8,\n    pageWidth: 900,\n    backgroundColor: \"#FFFFFF\",\n    annotatorColorList: [\"red\", \"orange\", \"yellow\", \"green\", \"blue\"],\n    // reader state keeper\n    sidebarVisible: \"\",\n    sidebarWidth: 25,\n  },\n\n  getters: {\n    fontSize: (state) => state.fontSize,\n    lineHeight: (state) => state.lineHeight,\n    pageWidth: (state) => state.pageWidth,\n    backgroundColor: (state) => state.backgroundColor,\n    annotatorColorList: (state) => state.annotatorColorList,\n    sidebarVisible: (state) => state.sidebarVisible,\n    sidebarWidth: (state) => state.sidebarWidth,\n  },\n\n  mutations: {\n    SET_EBOOK_SETTING: (state, setting) => {\n      for (let i in setting) {\n        state[i] = setting[i];\n      }\n    },\n  },\n\n  actions: {\n    async initSetting({ commit, state }) {\n      let setting = await database.getSettingFromDB();\n\n      if (setting) {\n        commit(\"SET_EBOOK_SETTING\", setting);\n      } else {\n        database.updateSettingToDB(state);\n      }\n    },\n\n    setEbookSetting({ commit, state, dispatch }, setting) {\n      commit(\"SET_EBOOK_SETTING\", setting);\n      dispatch(\"refreshEbookViewReady\", null, { root: true });\n      database.updateSettingToDB(state);\n    },\n  },\n};\n","/* eslint-disable no-unused-vars */\nimport database from \"../database\";\n\nexport default {\n  namespaced: true,\n\n  state: {\n    annotationList: [],\n  },\n\n  getters: {\n    annotationList: (state) => state.annotationList,\n    getBySectionIndex: (state, getters, rootState) => {\n      let index = rootState.currentSectionIndex;\n      return state.annotationList.filter((annotation) => {\n        return annotation.sectionIndex === index;\n      });\n    },\n  },\n\n  mutations: {\n    SET_ANNOTATION_LIST: (state, annotationList) => {\n      state.annotationList = annotationList;\n    },\n\n    ADD_ANNOTATION: (state, annotation) => {\n      state.annotationList.push(annotation);\n    },\n\n    DELETE_ANNOTATION: (state, hash) => {\n      let index = state.annotationList.findIndex(\n        (annotation) => annotation.hash === hash\n      );\n      state.annotationList.splice(index, 1);\n    },\n  },\n\n  actions: {\n    async initAnnotation({ commit, state, rootState }) {\n      await database.getEveAnnotationDB(rootState.ebook.ebookID);\n      let annotationList = await database.getAllAnnotation();\n      commit(\"SET_ANNOTATION_LIST\", annotationList);\n    },\n\n    async addAnnotation({ commit, state, rootState }, annotation) {\n      commit(\"ADD_ANNOTATION\", annotation);\n      await database.addAnnotationToDB(rootState.ebook.ebookID, annotation);\n    },\n\n    async deleteAnnotation({ commit, state, rootState }, hash) {\n      commit(\"DELETE_ANNOTATION\", hash);\n      await database.deleteAnnotationFromDB(rootState.ebook.ebookID, hash);\n    },\n\n    async importAnnotation({ dispatch, rootState }, data) {\n      const json = JSON.parse(data);\n      const ebookID = json.ebookID;\n      const annotationList = json.annotation;\n\n      if (rootState.ebook.ebookID === ebookID) {\n        for (let i = 0; i < annotationList.length; i++) {\n          await database.addAnnotationToDB(ebookID, annotationList[i]);\n        }\n        await dispatch(\"initAnnotation\");\n        return \"success\";\n      } else {\n        return \"error\";\n      }\n    },\n\n    exportAnnotation({ state, rootState }) {\n      let json = {};\n      json.title = rootState.ebook.title;\n      json.annotation = state.annotationList;\n      json.ebookID = rootState.ebook.ebookID;\n\n      const blob = new Blob([JSON.stringify(json)], {\n        type: \"application/json\",\n      });\n      const uri = URL.createObjectURL(blob);\n\n      const element = document.createElement(\"a\");\n      element.href = uri;\n      element.download = `${json.title} - annotation.json`;\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n    },\n  },\n};\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport setting from \"./setting\";\nimport annotation from \"./annotation\";\nimport database from \"../database\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    ebook: null,\n    ebookRootNode: null,\n    ebookViewReady: false,\n    lastCfi: 0,\n    currentSectionIndex: null,\n  },\n  getters: {\n    ebook: (state) => state.ebook,\n    ebookRootNode: (state) => state.ebookRootNode,\n    ebookViewReady: (state) => state.ebookViewReady,\n    lastCfi: (state) => state.lastCfi,\n    currentSectionIndex: (state) => state.currentSectionIndex,\n  },\n  mutations: {\n    SET_EBOOK: (state, ebook) => {\n      state.ebook = ebook;\n    },\n    SET_EBOOK_ROOT_NODE: (state, ebookRootNode) => {\n      state.ebookRootNode = ebookRootNode;\n    },\n    SET_EBOOK_VIEW_READY: (state, ebookViewReady) => {\n      state.ebookViewReady = ebookViewReady;\n    },\n    SET_LASTCFI: (state, lastCfi) => {\n      state.lastCfi = lastCfi;\n    },\n    SET_CURRENT_SECTION_INDEX: (state, currentSectionIndex) => {\n      state.currentSectionIndex = currentSectionIndex;\n    },\n  },\n  actions: {\n    setEbook: ({ commit }, ebook) => commit(\"SET_EBOOK\", ebook),\n\n    async refreshEbookViewReady({ commit }) {\n      await commit(\"SET_EBOOK_VIEW_READY\", false);\n      await commit(\"SET_EBOOK_VIEW_READY\", true);\n    },\n\n    async getLastCFI({ commit, state, dispatch }) {\n      let lastRead = await database.getLastReadFromDB(state.ebook.ebookID);\n\n      if (lastRead) {\n        commit(\"SET_LASTCFI\", lastRead.lastCfi);\n        return lastRead.lastCfi;\n      } else {\n        await dispatch(\"setLastRead\", 0);\n        return 0;\n      }\n    },\n\n    async setLastRead({ commit, state }, lastCfi) {\n      commit(\"SET_LASTCFI\", lastCfi);\n      let lastRead = {};\n      lastRead.ebookID = state.ebook.ebookID;\n      lastRead.date = new Date().toISOString();\n      lastRead.lastCfi = lastCfi;\n\n      await database.updateLastReadToDB(lastRead);\n    },\n  },\n  modules: {\n    setting,\n    annotation,\n  },\n});\n","import axios from \"axios\";\n\nconst baseURL = process.env.VUE_APP_API;\n\nconst instance = axios.create({\n  baseURL: baseURL,\n  timeout: 1000,\n});\n\ninstance.interceptors.response.use(\n  (res) =>\n    res.status === 200 ? Promise.resolve(res.data) : Promise.reject(res),\n  (error) => Promise.reject(error)\n);\n\nexport { baseURL };\nexport default instance;\n","import axios from \"./http\";\nimport { baseURL } from \"./http\";\n\nconst api = {\n  getBookList() {\n    return axios.get(`${baseURL}/api/booklist`);\n  },\n};\n\nexport default api;\n","function EventBus(Vue) {\n  const bus = new Vue();\n\n  Object.defineProperties(bus, {\n    on: {\n      get() {\n        return this.$on.bind(this);\n      },\n    },\n    once: {\n      get() {\n        return this.$once.bind(this);\n      },\n    },\n    off: {\n      get() {\n        return this.$off.bind(this);\n      },\n    },\n    emit: {\n      get() {\n        return this.$emit.bind(this);\n      },\n    },\n  });\n\n  Object.defineProperty(Vue, \"bus\", {\n    get() {\n      return bus;\n    },\n  });\n\n  Object.defineProperty(Vue.prototype, \"$bus\", {\n    get() {\n      return bus;\n    },\n  });\n}\n\nexport default EventBus;\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport api from \"./api\";\nimport ElementUI from \"element-ui\";\nimport \"element-ui/lib/theme-chalk/index.css\";\nimport EventBus from \"./event-bus\";\n\n// reset style\nimport \"./assets/style/reset.scss\";\nimport \"./assets/style/global.scss\";\n\nVue.prototype.$api = api;\n\nVue.config.productionTip = false;\nVue.use(ElementUI);\nVue.use(EventBus);\n\nnew Vue({\n  router,\n  store,\n  render: (h) => h(App),\n}).$mount(\"#app\");\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotationSvg.vue?vue&type=style&index=0&lang=css&\"","import {\n  extend,\n  type,\n  findChildren,\n  RangeObject,\n  isNumber,\n} from \"./utils/core\";\n\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\n\n/**\n\t* Parsing and creation of EpubCFIs: http://www.idpf.org/epub/linking/cfi/epub-cfi.html\n\n\t* Implements:\n\t* - Character Offset: epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)\n\t* - Simple Ranges : epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)\n\n\t* Does Not Implement:\n\t* - Temporal Offset (~)\n\t* - Spatial Offset (@)\n\t* - Temporal-Spatial Offset (~ + @)\n\t* - Text Location Assertion ([)\n\t* @class\n\t@param {string | Range | Node } [cfiFrom]\n\t@param {string | object} [base]\n\t@param {string} [ignoreClass] class to ignore when parsing DOM\n*/\nclass EpubCFI {\n  constructor(cfiFrom, base, ignoreClass) {\n    var type;\n\n    this.str = \"\";\n\n    this.base = {};\n    this.spinePos = 0; // For compatibility\n\n    this.range = false; // true || false;\n\n    this.path = {};\n    this.start = null;\n    this.end = null;\n\n    // Allow instantiation without the \"new\" keyword\n    if (!(this instanceof EpubCFI)) {\n      return new EpubCFI(cfiFrom, base, ignoreClass);\n    }\n\n    if (typeof base === \"string\") {\n      this.base = this.parseComponent(base);\n    } else if (typeof base === \"object\" && base.steps) {\n      this.base = base;\n    }\n\n    type = this.checkType(cfiFrom);\n\n    if (type === \"string\") {\n      this.str = cfiFrom;\n      return extend(this, this.parse(cfiFrom));\n    } else if (type === \"range\") {\n      return extend(this, this.fromRange(cfiFrom, this.base, ignoreClass));\n    } else if (type === \"node\") {\n      return extend(this, this.fromNode(cfiFrom, this.base, ignoreClass));\n    } else if (type === \"EpubCFI\" && cfiFrom.path) {\n      return cfiFrom;\n    } else if (!cfiFrom) {\n      return this;\n    } else {\n      throw new TypeError(\"not a valid argument for EpubCFI\");\n    }\n  }\n\n  /**\n   * Check the type of constructor input\n   * @private\n   */\n  checkType(cfi) {\n    if (this.isCfiString(cfi)) {\n      return \"string\";\n      // Is a range object\n    } else if (\n      cfi &&\n      typeof cfi === \"object\" &&\n      (type(cfi) === \"Range\" || typeof cfi.startContainer != \"undefined\")\n    ) {\n      return \"range\";\n    } else if (\n      cfi &&\n      typeof cfi === \"object\" &&\n      typeof cfi.nodeType != \"undefined\"\n    ) {\n      // || typeof cfi === \"function\"\n      return \"node\";\n    } else if (cfi && typeof cfi === \"object\" && cfi instanceof EpubCFI) {\n      return \"EpubCFI\";\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Parse a cfi string to a CFI object representation\n   * @param {string} cfiStr\n   * @returns {object} cfi\n   */\n  parse(cfiStr) {\n    var cfi = {\n      spinePos: -1,\n      range: false,\n      base: {},\n      path: {},\n      start: null,\n      end: null,\n    };\n    var baseComponent, pathComponent, range;\n\n    if (typeof cfiStr !== \"string\") {\n      return { spinePos: -1 };\n    }\n\n    if (cfiStr.indexOf(\"epubcfi(\") === 0 && cfiStr[cfiStr.length - 1] === \")\") {\n      // Remove intial epubcfi( and ending )\n      cfiStr = cfiStr.slice(8, cfiStr.length - 1);\n    }\n\n    baseComponent = this.getChapterComponent(cfiStr);\n\n    // Make sure this is a valid cfi or return\n    if (!baseComponent) {\n      return { spinePos: -1 };\n    }\n\n    cfi.base = this.parseComponent(baseComponent);\n\n    pathComponent = this.getPathComponent(cfiStr);\n    cfi.path = this.parseComponent(pathComponent);\n\n    range = this.getRange(cfiStr);\n\n    if (range) {\n      cfi.range = true;\n      cfi.start = this.parseComponent(range[0]);\n      cfi.end = this.parseComponent(range[1]);\n    }\n\n    // Get spine node position\n    // cfi.spineSegment = cfi.base.steps[1];\n\n    // Chapter segment is always the second step\n    cfi.spinePos = cfi.base.steps[1].index;\n\n    return cfi;\n  }\n\n  parseComponent(componentStr) {\n    var component = {\n      steps: [],\n      terminal: {\n        offset: null,\n        assertion: null,\n      },\n    };\n    var parts = componentStr.split(\":\");\n    var steps = parts[0].split(\"/\");\n    var terminal;\n\n    if (parts.length > 1) {\n      terminal = parts[1];\n      component.terminal = this.parseTerminal(terminal);\n    }\n\n    if (steps[0] === \"\") {\n      steps.shift(); // Ignore the first slash\n    }\n\n    component.steps = steps.map(\n      function (step) {\n        return this.parseStep(step);\n      }.bind(this)\n    );\n\n    return component;\n  }\n\n  parseStep(stepStr) {\n    var type, num, index, has_brackets, id;\n\n    has_brackets = stepStr.match(/\\[(.*)\\]/);\n    if (has_brackets && has_brackets[1]) {\n      id = has_brackets[1];\n    }\n\n    //-- Check if step is a text node or element\n    num = parseInt(stepStr);\n\n    if (isNaN(num)) {\n      return;\n    }\n\n    if (num % 2 === 0) {\n      // Even = is an element\n      type = \"element\";\n      index = num / 2 - 1;\n    } else {\n      type = \"text\";\n      index = (num - 1) / 2;\n    }\n\n    return {\n      type: type,\n      index: index,\n      id: id || null,\n    };\n  }\n\n  parseTerminal(termialStr) {\n    var characterOffset, textLocationAssertion;\n    var assertion = termialStr.match(/\\[(.*)\\]/);\n\n    if (assertion && assertion[1]) {\n      characterOffset = parseInt(termialStr.split(\"[\")[0]);\n      textLocationAssertion = assertion[1];\n    } else {\n      characterOffset = parseInt(termialStr);\n    }\n\n    if (!isNumber(characterOffset)) {\n      characterOffset = null;\n    }\n\n    return {\n      offset: characterOffset,\n      assertion: textLocationAssertion,\n    };\n  }\n\n  getChapterComponent(cfiStr) {\n    var indirection = cfiStr.split(\"!\");\n\n    return indirection[0];\n  }\n\n  getPathComponent(cfiStr) {\n    var indirection = cfiStr.split(\"!\");\n\n    if (indirection[1]) {\n      let ranges = indirection[1].split(\",\");\n      return ranges[0];\n    }\n  }\n\n  getRange(cfiStr) {\n    var ranges = cfiStr.split(\",\");\n\n    if (ranges.length === 3) {\n      return [ranges[1], ranges[2]];\n    }\n\n    return false;\n  }\n\n  getCharecterOffsetComponent(cfiStr) {\n    var splitStr = cfiStr.split(\":\");\n    return splitStr[1] || \"\";\n  }\n\n  joinSteps(steps) {\n    if (!steps) {\n      return \"\";\n    }\n\n    return steps\n      .map(function (part) {\n        var segment = \"\";\n\n        if (part.type === \"element\") {\n          segment += (part.index + 1) * 2;\n        }\n\n        if (part.type === \"text\") {\n          segment += 1 + 2 * part.index; // TODO: double check that this is odd\n        }\n\n        if (part.id) {\n          segment += \"[\" + part.id + \"]\";\n        }\n\n        return segment;\n      })\n      .join(\"/\");\n  }\n\n  segmentString(segment) {\n    var segmentString = \"/\";\n\n    segmentString += this.joinSteps(segment.steps);\n\n    if (segment.terminal && segment.terminal.offset != null) {\n      segmentString += \":\" + segment.terminal.offset;\n    }\n\n    if (segment.terminal && segment.terminal.assertion != null) {\n      segmentString += \"[\" + segment.terminal.assertion + \"]\";\n    }\n\n    return segmentString;\n  }\n\n  /**\n   * Convert CFI to a epubcfi(...) string\n   * @returns {string} epubcfi\n   */\n  toString() {\n    var cfiString = \"epubcfi(\";\n\n    cfiString += this.segmentString(this.base);\n\n    cfiString += \"!\";\n    cfiString += this.segmentString(this.path);\n\n    // Add Range, if present\n    if (this.range && this.start) {\n      cfiString += \",\";\n      cfiString += this.segmentString(this.start);\n    }\n\n    if (this.range && this.end) {\n      cfiString += \",\";\n      cfiString += this.segmentString(this.end);\n    }\n\n    cfiString += \")\";\n\n    return cfiString;\n  }\n\n  /**\n   * Compare which of two CFIs is earlier in the text\n   * @returns {number} First is earlier = -1, Second is earlier = 1, They are equal = 0\n   */\n  compare(cfiOne, cfiTwo) {\n    var stepsA, stepsB;\n    var terminalA, terminalB;\n\n    var rangeAStartSteps, rangeAEndSteps;\n    var rangeBEndSteps, rangeBEndSteps;\n    var rangeAStartTerminal, rangeAEndTerminal;\n    var rangeBStartTerminal, rangeBEndTerminal;\n\n    if (typeof cfiOne === \"string\") {\n      cfiOne = new EpubCFI(cfiOne);\n    }\n    if (typeof cfiTwo === \"string\") {\n      cfiTwo = new EpubCFI(cfiTwo);\n    }\n    // Compare Spine Positions\n    if (cfiOne.spinePos > cfiTwo.spinePos) {\n      return 1;\n    }\n    if (cfiOne.spinePos < cfiTwo.spinePos) {\n      return -1;\n    }\n\n    if (cfiOne.range) {\n      stepsA = cfiOne.path.steps.concat(cfiOne.start.steps);\n      terminalA = cfiOne.start.terminal;\n    } else {\n      stepsA = cfiOne.path.steps;\n      terminalA = cfiOne.path.terminal;\n    }\n\n    if (cfiTwo.range) {\n      stepsB = cfiTwo.path.steps.concat(cfiTwo.start.steps);\n      terminalB = cfiTwo.start.terminal;\n    } else {\n      stepsB = cfiTwo.path.steps;\n      terminalB = cfiTwo.path.terminal;\n    }\n\n    // Compare Each Step in the First item\n    for (var i = 0; i < stepsA.length; i++) {\n      if (!stepsA[i]) {\n        return -1;\n      }\n      if (!stepsB[i]) {\n        return 1;\n      }\n      if (stepsA[i].index > stepsB[i].index) {\n        return 1;\n      }\n      if (stepsA[i].index < stepsB[i].index) {\n        return -1;\n      }\n      // Otherwise continue checking\n    }\n\n    // All steps in First equal to Second and First is Less Specific\n    if (stepsA.length < stepsB.length) {\n      return -1;\n    }\n\n    // Compare the charecter offset of the text node\n    if (terminalA.offset > terminalB.offset) {\n      return 1;\n    }\n    if (terminalA.offset < terminalB.offset) {\n      return -1;\n    }\n\n    // CFI's are equal\n    return 0;\n  }\n\n  step(node) {\n    var nodeType = node.nodeType === TEXT_NODE ? \"text\" : \"element\";\n\n    return {\n      id: node.id,\n      tagName: node.tagName,\n      type: nodeType,\n      index: this.position(node),\n    };\n  }\n\n  filteredStep(node, ignoreClass) {\n    var filteredNode = this.filter(node, ignoreClass);\n    var nodeType;\n\n    // Node filtered, so ignore\n    if (!filteredNode) {\n      return;\n    }\n\n    // Otherwise add the filter node in\n    nodeType = filteredNode.nodeType === TEXT_NODE ? \"text\" : \"element\";\n\n    return {\n      id: filteredNode.id,\n      tagName: filteredNode.tagName,\n      type: nodeType,\n      index: this.filteredPosition(filteredNode, ignoreClass),\n    };\n  }\n\n  pathTo(node, offset, ignoreClass) {\n    var segment = {\n      steps: [],\n      terminal: {\n        offset: null,\n        assertion: null,\n      },\n    };\n    var currentNode = node;\n    var step;\n\n    while (\n      currentNode &&\n      currentNode.parentNode &&\n      // currentNode.parentNode.id != DOCUMENT_NODE &&\n      currentNode.tagName != \"EVE-VIEW-HTML\"\n    ) {\n      if (ignoreClass) {\n        step = this.filteredStep(currentNode, ignoreClass);\n      } else {\n        step = this.step(currentNode);\n      }\n\n      if (step) {\n        segment.steps.unshift(step);\n      }\n\n      currentNode = currentNode.parentNode;\n    }\n\n    if (offset != null && offset >= 0) {\n      segment.terminal.offset = offset;\n\n      // Make sure we are getting to a textNode if there is an offset\n      if (segment.steps[segment.steps.length - 1].type != \"text\") {\n        segment.steps.push({\n          type: \"text\",\n          index: 0,\n        });\n      }\n    }\n\n    return segment;\n  }\n\n  equalStep(stepA, stepB) {\n    if (!stepA || !stepB) {\n      return false;\n    }\n\n    if (\n      stepA.index === stepB.index &&\n      stepA.id === stepB.id &&\n      stepA.type === stepB.type\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Create a CFI object from a Range\n   * @param {Range} range\n   * @param {string | object} base\n   * @param {string} [ignoreClass]\n   * @returns {object} cfi\n   */\n  fromRange(range, base, ignoreClass) {\n    var cfi = {\n      range: false,\n      base: {},\n      path: {},\n      start: null,\n      end: null,\n    };\n\n    var start = range.startContainer;\n    var end = range.endContainer;\n\n    var startOffset = range.startOffset;\n    var endOffset = range.endOffset;\n\n    var needsIgnoring = false;\n\n    if (ignoreClass) {\n      // Tell pathTo if / what to ignore\n      needsIgnoring =\n        start.ownerDocument.querySelector(\".\" + ignoreClass) != null;\n    }\n\n    if (typeof base === \"string\") {\n      cfi.base = this.parseComponent(base);\n      cfi.spinePos = cfi.base.steps[1].index;\n    } else if (typeof base === \"object\") {\n      cfi.base = base;\n    }\n\n    if (range.collapsed) {\n      if (needsIgnoring) {\n        startOffset = this.patchOffset(start, startOffset, ignoreClass);\n      }\n      cfi.path = this.pathTo(start, startOffset, ignoreClass);\n    } else {\n      cfi.range = true;\n\n      if (needsIgnoring) {\n        startOffset = this.patchOffset(start, startOffset, ignoreClass);\n      }\n\n      cfi.start = this.pathTo(start, startOffset, ignoreClass);\n      if (needsIgnoring) {\n        endOffset = this.patchOffset(end, endOffset, ignoreClass);\n      }\n\n      cfi.end = this.pathTo(end, endOffset, ignoreClass);\n\n      // Create a new empty path\n      cfi.path = {\n        steps: [],\n        terminal: null,\n      };\n\n      // Push steps that are shared between start and end to the common path\n      var len = cfi.start.steps.length;\n      var i;\n\n      for (i = 0; i < len; i++) {\n        if (this.equalStep(cfi.start.steps[i], cfi.end.steps[i])) {\n          if (i === len - 1) {\n            // Last step is equal, check terminals\n            if (cfi.start.terminal === cfi.end.terminal) {\n              // CFI's are equal\n              cfi.path.steps.push(cfi.start.steps[i]);\n              // Not a range\n              cfi.range = false;\n            }\n          } else {\n            cfi.path.steps.push(cfi.start.steps[i]);\n          }\n        } else {\n          break;\n        }\n      }\n\n      cfi.start.steps = cfi.start.steps.slice(cfi.path.steps.length);\n      cfi.end.steps = cfi.end.steps.slice(cfi.path.steps.length);\n\n      // TODO: Add Sanity check to make sure that the end if greater than the start\n    }\n\n    return cfi;\n  }\n\n  /**\n   * Create a CFI object from a Node\n   * @param {Node} anchor\n   * @param {string | object} base\n   * @param {string} [ignoreClass]\n   * @returns {object} cfi\n   */\n  fromNode(anchor, base, ignoreClass) {\n    var cfi = {\n      range: false,\n      base: {},\n      path: {},\n      start: null,\n      end: null,\n    };\n\n    if (typeof base === \"string\") {\n      cfi.base = this.parseComponent(base);\n      cfi.spinePos = cfi.base.steps[1].index;\n    } else if (typeof base === \"object\") {\n      cfi.base = base;\n    }\n\n    cfi.path = this.pathTo(anchor, null, ignoreClass);\n\n    return cfi;\n  }\n\n  filter(anchor, ignoreClass) {\n    var needsIgnoring;\n    var sibling; // to join with\n    var parent, previousSibling, nextSibling;\n    var isText = false;\n\n    if (anchor.nodeType === TEXT_NODE) {\n      isText = true;\n      parent = anchor.parentNode;\n      needsIgnoring = anchor.parentNode.classList.contains(ignoreClass);\n    } else {\n      isText = false;\n      needsIgnoring = anchor.classList.contains(ignoreClass);\n    }\n\n    if (needsIgnoring && isText) {\n      previousSibling = parent.previousSibling;\n      nextSibling = parent.nextSibling;\n\n      // If the sibling is a text node, join the nodes\n      if (previousSibling && previousSibling.nodeType === TEXT_NODE) {\n        sibling = previousSibling;\n      } else if (nextSibling && nextSibling.nodeType === TEXT_NODE) {\n        sibling = nextSibling;\n      }\n\n      if (sibling) {\n        return sibling;\n      } else {\n        // Parent will be ignored on next step\n        return anchor;\n      }\n    } else if (needsIgnoring && !isText) {\n      // Otherwise just skip the element node\n      return false;\n    } else {\n      // No need to filter\n      return anchor;\n    }\n  }\n\n  patchOffset(anchor, offset, ignoreClass) {\n    if (anchor.nodeType != TEXT_NODE) {\n      throw new Error(\"Anchor must be a text node\");\n    }\n\n    var curr = anchor;\n    var totalOffset = offset;\n\n    // If the parent is a ignored node, get offset from it's start\n    if (anchor.parentNode.classList.contains(ignoreClass)) {\n      curr = anchor.parentNode;\n    }\n\n    while (curr.previousSibling) {\n      if (curr.previousSibling.nodeType === ELEMENT_NODE) {\n        // Originally a text node, so join\n        if (curr.previousSibling.classList.contains(ignoreClass)) {\n          totalOffset += curr.previousSibling.textContent.length;\n        } else {\n          break; // Normal node, dont join\n        }\n      } else {\n        // If the previous sibling is a text node, join the nodes\n        totalOffset += curr.previousSibling.textContent.length;\n      }\n\n      curr = curr.previousSibling;\n    }\n\n    return totalOffset;\n  }\n\n  normalizedMap(children, nodeType, ignoreClass) {\n    var output = {};\n    var prevIndex = -1;\n    var i,\n      len = children.length;\n    var currNodeType;\n    var prevNodeType;\n\n    for (i = 0; i < len; i++) {\n      currNodeType = children[i].nodeType;\n\n      // Check if needs ignoring\n      if (\n        currNodeType === ELEMENT_NODE &&\n        children[i].classList.contains(ignoreClass)\n      ) {\n        currNodeType = TEXT_NODE;\n      }\n\n      if (i > 0 && currNodeType === TEXT_NODE && prevNodeType === TEXT_NODE) {\n        // join text nodes\n        output[i] = prevIndex;\n      } else if (nodeType === currNodeType) {\n        prevIndex = prevIndex + 1;\n        output[i] = prevIndex;\n      }\n\n      prevNodeType = currNodeType;\n    }\n\n    return output;\n  }\n\n  position(anchor) {\n    var children, index;\n    if (anchor.nodeType === ELEMENT_NODE) {\n      children = anchor.parentNode.children;\n      if (!children) {\n        children = findChildren(anchor.parentNode);\n      }\n      index = Array.prototype.indexOf.call(children, anchor);\n    } else {\n      children = this.textNodes(anchor.parentNode);\n      index = children.indexOf(anchor);\n    }\n\n    return index;\n  }\n\n  filteredPosition(anchor, ignoreClass) {\n    var children, index, map;\n\n    if (anchor.nodeType === ELEMENT_NODE) {\n      children = anchor.parentNode.children;\n      map = this.normalizedMap(children, ELEMENT_NODE, ignoreClass);\n    } else {\n      children = anchor.parentNode.childNodes;\n      // Inside an ignored node\n      if (anchor.parentNode.classList.contains(ignoreClass)) {\n        anchor = anchor.parentNode;\n        children = anchor.parentNode.childNodes;\n      }\n      map = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n    }\n\n    index = Array.prototype.indexOf.call(children, anchor);\n\n    return map[index];\n  }\n\n  stepsToXpath(steps) {\n    var xpath = [\".\", \"*\"];\n\n    steps.forEach(function (step) {\n      var position = step.index + 1;\n\n      if (step.id) {\n        xpath.push(\"*[position()=\" + position + \" and @id='\" + step.id + \"']\");\n      } else if (step.type === \"text\") {\n        xpath.push(\"text()[\" + position + \"]\");\n      } else {\n        xpath.push(\"*[\" + position + \"]\");\n      }\n    });\n\n    return xpath.join(\"/\");\n  }\n\n  /*\n\n\tTo get the last step if needed:\n\n\t// Get the terminal step\n\tlastStep = steps[steps.length-1];\n\t// Get the query string\n\tquery = this.stepsToQuery(steps);\n\t// Find the containing element\n\tstartContainerParent = doc.querySelector(query);\n\t// Find the text node within that element\n\tif(startContainerParent && lastStep.type == \"text\") {\n\t\tcontainer = startContainerParent.childNodes[lastStep.index];\n\t}\n\t*/\n  stepsToQuerySelector(steps) {\n    var query = [\"html\"];\n\n    steps.forEach(function (step) {\n      var position = step.index + 1;\n\n      if (step.id) {\n        query.push(\"#\" + step.id);\n      } else if (step.type === \"text\") {\n        // unsupported in querySelector\n        // query.push(\"text()[\" + position + \"]\");\n      } else {\n        query.push(\"*:nth-child(\" + position + \")\");\n      }\n    });\n\n    return query.join(\">\");\n  }\n\n  textNodes(container, ignoreClass) {\n    return Array.prototype.slice\n      .call(container.childNodes)\n      .filter(function (node) {\n        if (node.nodeType === TEXT_NODE) {\n          return true;\n        } else if (ignoreClass && node.classList.contains(ignoreClass)) {\n          return true;\n        }\n        return false;\n      });\n  }\n\n  walkToNode(steps, node, ignoreClass) {\n    var doc = document;\n    var container = node;\n    var children;\n    var step;\n    var len = steps.length;\n    var i;\n\n    for (i = 0; i < len; i++) {\n      step = steps[i];\n\n      if (step.type === \"element\") {\n        //better to get a container using id as some times step.index may not be correct\n        //For ex.https://github.com/futurepress/epub.js/issues/561\n        if (step.id) {\n          container = doc.getElementById(step.id);\n        } else {\n          children = findChildren(container);\n          container = children[step.index];\n        }\n      } else if (step.type === \"text\") {\n        container = this.textNodes(container, ignoreClass)[step.index];\n      }\n      if (!container) {\n        //Break the for loop as due to incorrect index we can get error if\n        //container is undefined so that other functionailties works fine\n        //like navigation\n        break;\n      }\n    }\n\n    return container;\n  }\n\n  findNode(steps, _doc, ignoreClass) {\n    var doc = _doc || document;\n    var container;\n    var xpath;\n\n    if (!ignoreClass && typeof doc.evaluate != \"undefined\") {\n      xpath = this.stepsToXpath(steps);\n      container = doc.evaluate(\n        xpath,\n        doc,\n        null,\n        XPathResult.FIRST_ORDERED_NODE_TYPE,\n        null\n      ).singleNodeValue;\n    } else if (ignoreClass) {\n      container = this.walkToNode(steps, doc, ignoreClass);\n    } else {\n      container = this.walkToNode(steps, doc);\n    }\n\n    return container;\n  }\n\n  fixMiss(steps, offset, _doc, ignoreClass) {\n    var container = this.findNode(steps.slice(0, -1), _doc, ignoreClass);\n    var children = container.childNodes;\n    var map = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n    var child;\n    var len;\n    var lastStepIndex = steps[steps.length - 1].index;\n\n    for (let childIndex in map) {\n      if (!map.hasOwnProperty(childIndex)) return;\n\n      if (map[childIndex] === lastStepIndex) {\n        child = children[childIndex];\n        len = child.textContent.length;\n        if (offset > len) {\n          offset = offset - len;\n        } else {\n          if (child.nodeType === ELEMENT_NODE) {\n            container = child.childNodes[0];\n          } else {\n            container = child;\n          }\n          break;\n        }\n      }\n    }\n\n    return {\n      container: container,\n      offset: offset,\n    };\n  }\n\n  /**\n   * Creates a DOM range representing a CFI\n   * @param {document} _doc document referenced in the base\n   * @param {string} [ignoreClass]\n   * @return {Range}\n   */\n  toRange(node, ignoreClass) {\n    let range;\n    let start, end, startContainer, endContainer;\n    var cfi = this;\n    var startSteps, endSteps;\n    var needsIgnoring = ignoreClass\n      ? doc.querySelector(\".\" + ignoreClass) != null\n      : false;\n    var missed;\n\n    // if (typeof(doc.createRange) !== \"undefined\") {\n    // range = doc.createRange();\n    // } else {\n    range = document.createRange();\n    // }\n    // console.log(cfi)\n\n    if (cfi.range) {\n      start = cfi.start;\n      startSteps = cfi.path.steps.concat(start.steps);\n      startContainer = this.findNode(\n        startSteps,\n        node,\n        needsIgnoring ? ignoreClass : null\n      );\n      end = cfi.end;\n      endSteps = cfi.path.steps.concat(end.steps);\n      endContainer = this.findNode(\n        endSteps,\n        node,\n        needsIgnoring ? ignoreClass : null\n      );\n    } else {\n      start = cfi.path;\n      startSteps = cfi.path.steps;\n      startContainer = this.findNode(\n        cfi.path.steps,\n        node,\n        needsIgnoring ? ignoreClass : null\n      );\n    }\n\n    if (startContainer) {\n      try {\n        if (start.terminal.offset != null) {\n          range.setStart(startContainer, start.terminal.offset);\n        } else {\n          range.setStart(startContainer, 0);\n        }\n      } catch (e) {\n        missed = this.fixMiss(\n          startSteps,\n          start.terminal.offset,\n          node,\n          needsIgnoring ? ignoreClass : null\n        );\n        range.setStart(missed.container, missed.offset);\n      }\n    } else {\n      console.log(\"No startContainer found for\", this.toString());\n      // No start found\n      return null;\n    }\n\n    if (endContainer) {\n      try {\n        if (end.terminal.offset != null) {\n          range.setEnd(endContainer, end.terminal.offset);\n        } else {\n          range.setEnd(endContainer, 0);\n        }\n      } catch (e) {\n        missed = this.fixMiss(\n          endSteps,\n          cfi.end.terminal.offset,\n          doc,\n          needsIgnoring ? ignoreClass : null\n        );\n        range.setEnd(missed.container, missed.offset);\n      }\n    }\n\n    // doc.defaultView.getSelection().addRange(range);\n    return range;\n  }\n\n  /**\n   * Check if a string is wrapped with \"epubcfi()\"\n   * @param {string} str\n   * @returns {boolean}\n   */\n  isCfiString(str) {\n    if (\n      typeof str === \"string\" &&\n      str.indexOf(\"epubcfi(\") === 0 &&\n      str[str.length - 1] === \")\"\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  generateChapterComponent(_spineNodeIndex, _pos, id) {\n    var pos = parseInt(_pos),\n      spineNodeIndex = (_spineNodeIndex + 1) * 2,\n      cfi = \"/\" + spineNodeIndex + \"/\";\n\n    cfi += (pos + 1) * 2;\n\n    if (id) {\n      cfi += \"[\" + id + \"]\";\n    }\n\n    return cfi;\n  }\n\n  /**\n   * Collapse a CFI Range to a single CFI Position\n   * @param {boolean} [toStart=false]\n   */\n  collapse(toStart) {\n    if (!this.range) {\n      return;\n    }\n\n    this.range = false;\n\n    if (toStart) {\n      this.path.steps = this.path.steps.concat(this.start.steps);\n      this.path.terminal = this.start.terminal;\n    } else {\n      this.path.steps = this.path.steps.concat(this.end.steps);\n      this.path.terminal = this.end.terminal;\n    }\n  }\n}\n\nexport default EpubCFI;\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveViewer.vue?vue&type=style&index=0&lang=scss&\"","/**\n * Core Utilities and Helpers\n * @module Core\n */\n\n/**\n * Vendor prefixed requestAnimationFrame\n * @returns {function} requestAnimationFrame\n * @memberof Core\n */\nexport const requestAnimationFrame =\n  typeof window != \"undefined\"\n    ? window.requestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      window.msRequestAnimationFrame\n    : false;\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\nconst _URL =\n  typeof URL != \"undefined\"\n    ? URL\n    : typeof window != \"undefined\"\n    ? window.URL || window.webkitURL || window.mozURL\n    : undefined;\n\n/**\n * Generates a UUID\n * based on: http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n * @returns {string} uuid\n * @memberof Core\n */\nexport function uuid() {\n  var d = new Date().getTime();\n  var uuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\n    /[xy]/g,\n    function (c) {\n      var r = (d + Math.random() * 16) % 16 | 0;\n      d = Math.floor(d / 16);\n      return (c == \"x\" ? r : (r & 0x7) | 0x8).toString(16);\n    }\n  );\n  return uuid;\n}\n\n/**\n * Gets the height of a document\n * @returns {number} height\n * @memberof Core\n */\nexport function documentHeight() {\n  return Math.max(\n    document.documentElement.clientHeight,\n    document.body.scrollHeight,\n    document.documentElement.scrollHeight,\n    document.body.offsetHeight,\n    document.documentElement.offsetHeight\n  );\n}\n\n/**\n * Checks if a node is an element\n * @param {object} obj\n * @returns {boolean}\n * @memberof Core\n */\nexport function isElement(obj) {\n  return !!(obj && obj.nodeType == 1);\n}\n\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\nexport function isNumber(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\nexport function isFloat(n) {\n  let f = parseFloat(n);\n\n  if (isNumber(n) === false) {\n    return false;\n  }\n\n  if (typeof n === \"string\" && n.indexOf(\".\") > -1) {\n    return true;\n  }\n\n  return Math.floor(f) !== f;\n}\n\n/**\n * Get a prefixed css property\n * @param {string} unprefixed\n * @returns {string}\n * @memberof Core\n */\nexport function prefixed(unprefixed) {\n  var vendors = [\"Webkit\", \"webkit\", \"Moz\", \"O\", \"ms\"];\n  var prefixes = [\"-webkit-\", \"-webkit-\", \"-moz-\", \"-o-\", \"-ms-\"];\n  var lower = unprefixed.toLowerCase();\n  var length = vendors.length;\n\n  if (\n    typeof document === \"undefined\" ||\n    typeof document.body.style[lower] != \"undefined\"\n  ) {\n    return unprefixed;\n  }\n\n  for (var i = 0; i < length; i++) {\n    if (typeof document.body.style[prefixes[i] + lower] != \"undefined\") {\n      return prefixes[i] + lower;\n    }\n  }\n\n  return unprefixed;\n}\n\n/**\n * Apply defaults to an object\n * @param {object} obj\n * @returns {object}\n * @memberof Core\n */\nexport function defaults(obj) {\n  for (var i = 1, length = arguments.length; i < length; i++) {\n    var source = arguments[i];\n    for (var prop in source) {\n      if (obj[prop] === void 0) obj[prop] = source[prop];\n    }\n  }\n  return obj;\n}\n\n/**\n * Extend properties of an object\n * @param {object} target\n * @returns {object}\n * @memberof Core\n */\nexport function extend(target) {\n  var sources = [].slice.call(arguments, 1);\n  sources.forEach(function (source) {\n    if (!source) return;\n    Object.getOwnPropertyNames(source).forEach(function (propName) {\n      Object.defineProperty(\n        target,\n        propName,\n        Object.getOwnPropertyDescriptor(source, propName)\n      );\n    });\n  });\n  return target;\n}\n\n/**\n * Fast quicksort insert for sorted array -- based on:\n *  http://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @returns {number} location (in array)\n * @memberof Core\n */\nexport function insert(item, array, compareFunction) {\n  var location = locationOf(item, array, compareFunction);\n  array.splice(location, 0, item);\n\n  return location;\n}\n\n/**\n * Finds where something would fit into a sorted array\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} location (in array)\n * @memberof Core\n */\nexport function locationOf(item, array, compareFunction, _start, _end) {\n  var start = _start || 0;\n  var end = _end || array.length;\n  var pivot = parseInt(start + (end - start) / 2);\n  var compared;\n  if (!compareFunction) {\n    compareFunction = function (a, b) {\n      if (a > b) return 1;\n      if (a < b) return -1;\n      if (a == b) return 0;\n    };\n  }\n  if (end - start <= 0) {\n    return pivot;\n  }\n\n  compared = compareFunction(array[pivot], item);\n  if (end - start === 1) {\n    return compared >= 0 ? pivot : pivot + 1;\n  }\n  if (compared === 0) {\n    return pivot;\n  }\n  if (compared === -1) {\n    return locationOf(item, array, compareFunction, pivot, end);\n  } else {\n    return locationOf(item, array, compareFunction, start, pivot);\n  }\n}\n\n/**\n * Finds index of something in a sorted array\n * Returns -1 if not found\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} index (in array) or -1\n * @memberof Core\n */\nexport function indexOfSorted(item, array, compareFunction, _start, _end) {\n  var start = _start || 0;\n  var end = _end || array.length;\n  var pivot = parseInt(start + (end - start) / 2);\n  var compared;\n  if (!compareFunction) {\n    compareFunction = function (a, b) {\n      if (a > b) return 1;\n      if (a < b) return -1;\n      if (a == b) return 0;\n    };\n  }\n  if (end - start <= 0) {\n    return -1; // Not found\n  }\n\n  compared = compareFunction(array[pivot], item);\n  if (end - start === 1) {\n    return compared === 0 ? pivot : -1;\n  }\n  if (compared === 0) {\n    return pivot; // Found\n  }\n  if (compared === -1) {\n    return indexOfSorted(item, array, compareFunction, pivot, end);\n  } else {\n    return indexOfSorted(item, array, compareFunction, start, pivot);\n  }\n}\n/**\n * Find the bounds of an element\n * taking padding and margin into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\nexport function bounds(el) {\n  var style = window.getComputedStyle(el);\n  var widthProps = [\n    \"width\",\n    \"paddingRight\",\n    \"paddingLeft\",\n    \"marginRight\",\n    \"marginLeft\",\n    \"borderRightWidth\",\n    \"borderLeftWidth\",\n  ];\n  var heightProps = [\n    \"height\",\n    \"paddingTop\",\n    \"paddingBottom\",\n    \"marginTop\",\n    \"marginBottom\",\n    \"borderTopWidth\",\n    \"borderBottomWidth\",\n  ];\n\n  var width = 0;\n  var height = 0;\n\n  widthProps.forEach(function (prop) {\n    width += parseFloat(style[prop]) || 0;\n  });\n\n  heightProps.forEach(function (prop) {\n    height += parseFloat(style[prop]) || 0;\n  });\n\n  return {\n    height: height,\n    width: width,\n  };\n}\n\n/**\n * Find the bounds of an element\n * taking padding, margin and borders into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\nexport function borders(el) {\n  var style = window.getComputedStyle(el);\n  var widthProps = [\n    \"paddingRight\",\n    \"paddingLeft\",\n    \"marginRight\",\n    \"marginLeft\",\n    \"borderRightWidth\",\n    \"borderLeftWidth\",\n  ];\n  var heightProps = [\n    \"paddingTop\",\n    \"paddingBottom\",\n    \"marginTop\",\n    \"marginBottom\",\n    \"borderTopWidth\",\n    \"borderBottomWidth\",\n  ];\n\n  var width = 0;\n  var height = 0;\n\n  widthProps.forEach(function (prop) {\n    width += parseFloat(style[prop]) || 0;\n  });\n\n  heightProps.forEach(function (prop) {\n    height += parseFloat(style[prop]) || 0;\n  });\n\n  return {\n    height: height,\n    width: width,\n  };\n}\n\n/**\n * Find the bounds of any node\n * allows for getting bounds of text nodes by wrapping them in a range\n * @param {node} node\n * @returns {BoundingClientRect}\n * @memberof Core\n */\nexport function nodeBounds(node) {\n  let elPos;\n  let doc = node.ownerDocument;\n  if (node.nodeType == Node.TEXT_NODE) {\n    let elRange = doc.createRange();\n    elRange.selectNodeContents(node);\n    elPos = elRange.getBoundingClientRect();\n  } else {\n    elPos = node.getBoundingClientRect();\n  }\n  return elPos;\n}\n\n/**\n * Find the equivelent of getBoundingClientRect of a browser window\n * @returns {{ width: Number, height: Number, top: Number, left: Number, right: Number, bottom: Number }}\n * @memberof Core\n */\nexport function windowBounds() {\n  var width = window.innerWidth;\n  var height = window.innerHeight;\n\n  return {\n    top: 0,\n    left: 0,\n    right: width,\n    bottom: height,\n    width: width,\n    height: height,\n  };\n}\n\n/**\n * Gets the index of a node in its parent\n * @param {Node} node\n * @param {string} typeId\n * @return {number} index\n * @memberof Core\n */\nexport function indexOfNode(node, typeId) {\n  var parent = node.parentNode;\n  var children = parent.childNodes;\n  var sib;\n  var index = -1;\n  for (var i = 0; i < children.length; i++) {\n    sib = children[i];\n    if (sib.nodeType === typeId) {\n      index++;\n    }\n    if (sib == node) break;\n  }\n\n  return index;\n}\n\n/**\n * Gets the index of a text node in its parent\n * @param {node} textNode\n * @returns {number} index\n * @memberof Core\n */\nexport function indexOfTextNode(textNode) {\n  return indexOfNode(textNode, TEXT_NODE);\n}\n\n/**\n * Gets the index of an element node in its parent\n * @param {element} elementNode\n * @returns {number} index\n * @memberof Core\n */\nexport function indexOfElementNode(elementNode) {\n  return indexOfNode(elementNode, ELEMENT_NODE);\n}\n\n/**\n * Check if extension is xml\n * @param {string} ext\n * @returns {boolean}\n * @memberof Core\n */\nexport function isXml(ext) {\n  return [\"xml\", \"opf\", \"ncx\"].indexOf(ext) > -1;\n}\n\n/**\n * Create a new blob\n * @param {any} content\n * @param {string} mime\n * @returns {Blob}\n * @memberof Core\n */\nexport function createBlob(content, mime) {\n  return new Blob([content], { type: mime });\n}\n\n/**\n * Create a new blob url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\nexport function createBlobUrl(content, mime) {\n  var tempUrl;\n  var blob = createBlob(content, mime);\n\n  tempUrl = _URL.createObjectURL(blob);\n\n  return tempUrl;\n}\n\n/**\n * Remove a blob url\n * @param {string} url\n * @memberof Core\n */\nexport function revokeBlobUrl(url) {\n  return _URL.revokeObjectURL(url);\n}\n\n/**\n * Create a new base64 encoded url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\nexport function createBase64Url(content, mime) {\n  var data;\n  var datauri;\n\n  if (typeof content !== \"string\") {\n    // Only handles strings\n    return;\n  }\n\n  data = btoa(encodeURIComponent(content));\n\n  datauri = \"data:\" + mime + \";base64,\" + data;\n\n  return datauri;\n}\n\n/**\n * Get type of an object\n * @param {object} obj\n * @returns {string} type\n * @memberof Core\n */\nexport function type(obj) {\n  return Object.prototype.toString.call(obj).slice(8, -1);\n}\n\n/**\n * Parse xml (or html) markup\n * @param {string} markup\n * @param {string} mime\n * @param {boolean} forceXMLDom force using xmlDom to parse instead of native parser\n * @returns {document} document\n * @memberof Core\n */\nexport function parse(markup, mime, forceXMLDom) {\n  var doc;\n  var Parser;\n\n  if (typeof DOMParser === \"undefined\" || forceXMLDom) {\n    Parser = require(\"xmldom\").DOMParser;\n  } else {\n    Parser = DOMParser;\n  }\n\n  // Remove byte order mark before parsing\n  // https://www.w3.org/International/questions/qa-byte-order-mark\n  if (markup.charCodeAt(0) === 0xfeff) {\n    markup = markup.slice(1);\n  }\n\n  doc = new Parser().parseFromString(markup, mime);\n\n  return doc;\n}\n\n/**\n * querySelector polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element} element\n * @memberof Core\n */\nexport function qs(el, sel) {\n  var elements;\n  if (!el) {\n    throw new Error(\"No Element Provided\");\n  }\n\n  if (typeof el.querySelector != \"undefined\") {\n    return el.querySelector(sel);\n  } else {\n    elements = el.getElementsByTagName(sel);\n    if (elements.length) {\n      return elements[0];\n    }\n  }\n}\n\n/**\n * querySelectorAll polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function qsa(el, sel) {\n  if (typeof el.querySelector != \"undefined\") {\n    return el.querySelectorAll(sel);\n  } else {\n    return el.getElementsByTagName(sel);\n  }\n}\n\n/**\n * querySelector by property\n * @param {element} el\n * @param {string} sel selector string\n * @param {object[]} props\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function qsp(el, sel, props) {\n  var q, filtered;\n  if (typeof el.querySelector != \"undefined\") {\n    sel += \"[\";\n    for (var prop in props) {\n      sel += prop + \"~='\" + props[prop] + \"'\";\n    }\n    sel += \"]\";\n    return el.querySelector(sel);\n  } else {\n    q = el.getElementsByTagName(sel);\n    filtered = Array.prototype.slice.call(q, 0).filter(function (el) {\n      for (var prop in props) {\n        if (el.getAttribute(prop) === props[prop]) {\n          return true;\n        }\n      }\n      return false;\n    });\n\n    if (filtered) {\n      return filtered[0];\n    }\n  }\n}\n\n/**\n * Sprint through all text nodes in a document\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n */\nexport function sprint(root, func) {\n  var doc = root.ownerDocument || root;\n  if (typeof doc.createTreeWalker !== \"undefined\") {\n    treeWalker(root, func, NodeFilter.SHOW_TEXT);\n  } else {\n    walk(\n      root,\n      function (node) {\n        if (node && node.nodeType === 3) {\n          // Node.TEXT_NODE\n          func(node);\n        }\n      },\n      true\n    );\n  }\n}\n\n/**\n * Create a treeWalker\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n * @param  {function | object} filter funtion or object to filter with\n */\nexport function treeWalker(root, func, filter) {\n  var treeWalker = document.createTreeWalker(root, filter, null, false);\n  let node;\n  while ((node = treeWalker.nextNode())) {\n    func(node);\n  }\n}\n\n/**\n * @memberof Core\n * @param {node} node\n * @param {callback} return false for continue,true for break inside callback\n */\nexport function walk(node, callback) {\n  if (callback(node)) {\n    return true;\n  }\n  node = node.firstChild;\n  if (node) {\n    do {\n      let walked = walk(node, callback);\n      if (walked) {\n        return true;\n      }\n      node = node.nextSibling;\n    } while (node);\n  }\n}\n\n/**\n * Convert a blob to a base64 encoded string\n * @param {Blog} blob\n * @returns {string}\n * @memberof Core\n */\nexport function blob2base64(blob) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.readAsDataURL(blob);\n    reader.onloadend = function () {\n      resolve(reader.result);\n    };\n  });\n}\n\n/**\n * Creates a new pending promise and provides methods to resolve or reject it.\n * From: https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred#backwards_forwards_compatible\n * @memberof Core\n */\nexport function defer() {\n  /* A method to resolve the associated Promise with the value passed.\n   * If the promise is already settled it does nothing.\n   *\n   * @param {anything} value : This value is used to resolve the promise\n   * If the value is a Promise then the associated promise assumes the state\n   * of Promise passed as value.\n   */\n  this.resolve = null;\n\n  /* A method to reject the assocaited Promise with the value passed.\n   * If the promise is already settled it does nothing.\n   *\n   * @param {anything} reason: The reason for the rejection of the Promise.\n   * Generally its an Error object. If however a Promise is passed, then the Promise\n   * itself will be the reason for rejection no matter the state of the Promise.\n   */\n  this.reject = null;\n\n  this.id = uuid();\n\n  /* A newly created Pomise object.\n   * Initially in pending state.\n   */\n  this.promise = new Promise((resolve, reject) => {\n    this.resolve = resolve;\n    this.reject = reject;\n  });\n  Object.freeze(this);\n}\n\n/**\n * querySelector with filter by epub type\n * @param {element} html\n * @param {string} element element type to find\n * @param {string} type epub type to find\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function querySelectorByType(html, element, type) {\n  var query;\n  if (typeof html.querySelector != \"undefined\") {\n    query = html.querySelector(`${element}[*|type=\"${type}\"]`);\n  }\n  // Handle IE not supporting namespaced epub:type in querySelector\n  if (!query || query.length === 0) {\n    query = qsa(html, element);\n    for (var i = 0; i < query.length; i++) {\n      if (\n        query[i].getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") ===\n          type ||\n        query[i].getAttribute(\"epub:type\") === type\n      ) {\n        return query[i];\n      }\n    }\n  } else {\n    return query;\n  }\n}\n\n/**\n * Find direct decendents of an element\n * @param {element} el\n * @returns {element[]} children\n * @memberof Core\n */\nexport function findChildren(el) {\n  var result = [];\n  var childNodes = el.childNodes;\n  for (var i = 0; i < childNodes.length; i++) {\n    let node = childNodes[i];\n    if (node.nodeType === 1) {\n      result.push(node);\n    }\n  }\n  return result;\n}\n\n/**\n * Find all parents (ancestors) of an element\n * @param {element} node\n * @returns {element[]} parents\n * @memberof Core\n */\nexport function parents(node) {\n  var nodes = [node];\n  for (; node; node = node.parentNode) {\n    nodes.unshift(node);\n  }\n  return nodes;\n}\n\n/**\n * Find all direct decendents of a specific type\n * @param {element} el\n * @param {string} nodeName\n * @param {boolean} [single]\n * @returns {element[]} children\n * @memberof Core\n */\nexport function filterChildren(el, nodeName, single) {\n  var result = [];\n  var childNodes = el.childNodes;\n  for (var i = 0; i < childNodes.length; i++) {\n    let node = childNodes[i];\n    if (node.nodeType === 1 && node.nodeName.toLowerCase() === nodeName) {\n      if (single) {\n        return node;\n      } else {\n        result.push(node);\n      }\n    }\n  }\n  if (!single) {\n    return result;\n  }\n}\n\n/**\n * Filter all parents (ancestors) with tag name\n * @param {element} node\n * @param {string} tagname\n * @returns {element[]} parents\n * @memberof Core\n */\nexport function getParentByTagName(node, tagname) {\n  let parent;\n  if (node === null || tagname === \"\") return;\n  parent = node.parentNode;\n  while (parent.nodeType === 1) {\n    if (parent.tagName.toLowerCase() === tagname) {\n      return parent;\n    }\n    parent = parent.parentNode;\n  }\n}\n\n/**\n * Lightweight Polyfill for DOM Range\n * @class\n * @memberof Core\n */\nexport class RangeObject {\n  constructor() {\n    this.collapsed = false;\n    this.commonAncestorContainer = undefined;\n    this.endContainer = undefined;\n    this.endOffset = undefined;\n    this.startContainer = undefined;\n    this.startOffset = undefined;\n  }\n\n  setStart(startNode, startOffset) {\n    this.startContainer = startNode;\n    this.startOffset = startOffset;\n\n    if (!this.endContainer) {\n      this.collapse(true);\n    } else {\n      this.commonAncestorContainer = this._commonAncestorContainer();\n    }\n\n    this._checkCollapsed();\n  }\n\n  setEnd(endNode, endOffset) {\n    this.endContainer = endNode;\n    this.endOffset = endOffset;\n\n    if (!this.startContainer) {\n      this.collapse(false);\n    } else {\n      this.collapsed = false;\n      this.commonAncestorContainer = this._commonAncestorContainer();\n    }\n\n    this._checkCollapsed();\n  }\n\n  collapse(toStart) {\n    this.collapsed = true;\n    if (toStart) {\n      this.endContainer = this.startContainer;\n      this.endOffset = this.startOffset;\n      this.commonAncestorContainer = this.startContainer.parentNode;\n    } else {\n      this.startContainer = this.endContainer;\n      this.startOffset = this.endOffset;\n      this.commonAncestorContainer = this.endOffset.parentNode;\n    }\n  }\n\n  selectNode(referenceNode) {\n    let parent = referenceNode.parentNode;\n    let index = Array.prototype.indexOf.call(parent.childNodes, referenceNode);\n    this.setStart(parent, index);\n    this.setEnd(parent, index + 1);\n  }\n\n  selectNodeContents(referenceNode) {\n    let end = referenceNode.childNodes[referenceNode.childNodes - 1];\n    let endIndex =\n      referenceNode.nodeType === 3\n        ? referenceNode.textContent.length\n        : parent.childNodes.length;\n    this.setStart(referenceNode, 0);\n    this.setEnd(referenceNode, endIndex);\n  }\n\n  _commonAncestorContainer(startContainer, endContainer) {\n    var startParents = parents(startContainer || this.startContainer);\n    var endParents = parents(endContainer || this.endContainer);\n\n    if (startParents[0] != endParents[0]) return undefined;\n\n    for (var i = 0; i < startParents.length; i++) {\n      if (startParents[i] != endParents[i]) {\n        return startParents[i - 1];\n      }\n    }\n  }\n\n  _checkCollapsed() {\n    if (\n      this.startContainer === this.endContainer &&\n      this.startOffset === this.endOffset\n    ) {\n      this.collapsed = true;\n    } else {\n      this.collapsed = false;\n    }\n  }\n\n  toString() {\n    // TODO: implement walking between start and end to find text\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./EveAnnotatorPopover.vue?vue&type=style&index=0&id=22fc5670&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Home.vue?vue&type=style&index=0&id=33907d84&lang=scss&scoped=true&\""],"sourceRoot":""}